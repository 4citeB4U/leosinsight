<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="description" content="Leo's Insight - The ultimate Roblox gaming magazine and development community for gamers aged 11-21" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://leosinsight.com/" />
  <meta property="og:title" content="Leo's Insight - Epic Roblox Gaming Magazine & Development Community" />
  <meta property="og:description" content="The ultimate Roblox gaming magazine and development community for gamers aged 11-21. Learn game development, discover character builds, and connect with other players." />
  <meta property="og:image" content="./assets/og-thumbnail.jpg" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://leosinsight.com/" />
  <meta property="twitter:title" content="Leo's Insight - Epic Roblox Gaming Magazine & Development Community" />
  <meta property="twitter:description" content="The ultimate Roblox gaming magazine and development community for gamers aged 11-21. Learn game development, discover character builds, and connect with other players." />
  <meta property="twitter:image" content="./assets/og-thumbnail.jpg" />

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Leo's Insight",
    "url": "https://leosinsight.com",
    "description": "The ultimate Roblox gaming magazine and development community for gamers aged 11-21.",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://leosinsight.com/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  <meta name="theme-color" content="#ff6600" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: data: blob: 'unsafe-inline' 'unsafe-eval'; connect-src 'self' https: wss:; img-src 'self' https: data: blob:; media-src 'self' https: data: blob:; font-src 'self' https: data:; frame-src 'self' https:;" />

  <!-- Cross-platform support -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="application-name" content="Leo's Insight" />
  <meta name="msapplication-TileColor" content="#ff6600" />
  <meta name="msapplication-tap-highlight" content="no" />

  <!-- PWA support -->
  <link rel="manifest" href="./manifest.json" />
  <link rel="apple-touch-icon" href="./images/Leosavatr.png" />
  <link rel="icon" type="image/png" href="./assets/favicon.ico" />
  <title>Leo's Insight - Epic Roblox Gaming Magazine &amp; Development Community</title>

  <!-- Preload critical assets -->
  <link rel="preload" href="05. bluudanc.mp3" as="audio" />
  <link rel="preload" href="images/top3.png" as="image" />
  <link rel="preload" href="images/breaking_news.png" as="image" />
  <link rel="preload" href="images/fxeffect.png" as="image" />
  <link rel="preload" href="images/Leosavatr.png" as="image" />

  <!-- Preconnect to external domains -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
  <link rel="preconnect" href="https://www.youtube.com" crossorigin />
  <link rel="preconnect" href="https://gun-manhattan.herokuapp.com" crossorigin />
  <link rel="preconnect" href="https://gun-us.herokuapp.com" crossorigin />
  <link rel="preconnect" href="https://gun-eu.herokuapp.com" crossorigin />

  <!-- EmailJS SDK for sending user data without backend (defer loading) -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js" defer></script>
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize EmailJS with your public key
      if (window.emailjs) {
        emailjs.init("YOUR_PUBLIC_KEY"); // Replace with your actual EmailJS public key
      }

      // Register service worker for offline functionality and caching
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('Service Worker registered with scope:', registration.scope);
          })
          .catch(error => {
            console.error('Service Worker registration failed:', error);
          });
      }
    });
  </script>

  <!-- Font Awesome for icons (with integrity and crossorigin) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    /* CSS Reset and Base Styles */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #fff;
      background: url("images/DALL¬∑E 2025-03-22 17.45.58 - Create an epic, high-resolution background image divided into four distinct sections, styled in the iconic blocky and colorful art style of Roblox. __.webp") no-repeat center center fixed;
      background-size: cover;
      overflow-x: hidden;
    }
    /* Responsive styles for different device types */
    @media (max-width: 768px) {
      body { background-size: contain; }
      .header-container { flex-direction: column; }
      .logo-container { margin-bottom: 10px; }
      nav ul { flex-direction: column; align-items: center; display: none; }
      nav ul.active { display: flex; }
      nav ul li { margin: 10px 0; }
      .hamburger-menu { display: block; }
      .hero h1 { font-size: 2.5rem; }
      .section-title { font-size: 2.2rem; }
      .community-content { grid-template-columns: 1fr; }
      .cards-container, .news-grid, .blog-posts { grid-template-columns: 1fr; }
    }

    /* Foldable phones in folded state */
    @media (max-width: 320px) {
      .hero-content { padding: 15px; }
      .leo-avatar { width: 150px; height: 150px; }
      .hero h1 { font-size: 1.8rem; }
      .hero p { font-size: 0.9rem; }
      .btn { padding: 10px 20px; font-size: 1rem; }
      .card-wrapper { height: 350px; }
    }

    /* Foldable phones in unfolded state (wider aspect ratio) */
    @media (min-width: 768px) and (max-width: 900px) and (aspect-ratio: 22/9),
           (min-width: 768px) and (max-width: 900px) and (aspect-ratio: 21/9) {
      .cards-container, .news-grid, .blog-posts {
        grid-template-columns: repeat(3, 1fr);
      }
      .hero-content {
        flex-direction: row;
        max-width: 90%;
      }
    }

    /* Tablets and iPads */
    @media (min-width: 768px) and (max-width: 1024px) {
      .cards-container, .news-grid, .blog-posts {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* Large screens */
    @media (min-width: 1400px) {
      .container { max-width: 1320px; }
      .cards-container, .news-grid, .blog-posts {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    /* Print styles */
    @media print {
      body { background: white; color: black; }
      header, footer, .narrator-controls, .music-btn, video { display: none; }
      .container { max-width: 100%; }
      a { color: #000; text-decoration: underline; }
      .card-wrapper { page-break-inside: avoid; }
      .card { transform: none !important; }
      .card-back { display: none; }
    }

    a { text-decoration: none; color: #00c8ff; }
    ul { list-style: none; }
    img { max-width: 100%; display: block; }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

    /* Header */
    header {
      background: #1a1a1a;
      padding: 15px 0;
      box-shadow: 0 2px 20px rgba(0,0,0,0.5);
      position: relative;
      z-index: 100;
    }
    .hamburger-menu {
      display: none;
      flex-direction: column;
      justify-content: space-between;
      width: 30px;
      height: 21px;
      cursor: pointer;
      z-index: 200;
      position: absolute;
      right: 20px;
      top: 25px;
    }
    .hamburger-menu span {
      display: block;
      height: 3px;
      width: 100%;
      background-color: white;
      border-radius: 3px;
      transition: all 0.3s ease;
    }
    .hamburger-menu.active span:nth-child(1) {
      transform: translateY(9px) rotate(45deg);
    }
    .hamburger-menu.active span:nth-child(2) {
      opacity: 0;
    }
    .hamburger-menu.active span:nth-child(3) {
      transform: translateY(-9px) rotate(-45deg);
    }
    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .logo-container { display: flex; align-items: center; gap: 10px; }
    .site-logo {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: logo-animation 5s infinite;
      box-shadow: 0 0 15px rgba(255, 102, 0, 0.5);
      transition: all 0.3s ease;
    }
    .site-logo:hover {
      transform: rotate(10deg) scale(1.1);
      box-shadow: 0 0 25px rgba(255, 102, 0, 0.8);
    }
    @keyframes logo-animation {
      0% { filter: brightness(1); transform: scale(1) rotate(0deg); }
      25% { filter: brightness(1.4); transform: scale(1.08) rotate(5deg); }
      50% { filter: brightness(1.2); transform: scale(1.05) rotate(0deg); }
      75% { filter: brightness(1.4); transform: scale(1.08) rotate(-5deg); }
      100% { filter: brightness(1); transform: scale(1) rotate(0deg); }
    }

    /* User Profile Styles */
    .user-profile {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .join-btn {
      background: linear-gradient(45deg, #ff6600, #ff9500);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 20px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    .join-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 102, 0, 0.4);
    }
    .music-btn {
      background: rgba(0, 0, 0, 0.3);
      color: #00c8ff;
      border: 1px solid #00c8ff;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
    }
    .music-btn:hover {
      background: rgba(0, 200, 255, 0.2);
      transform: translateY(-2px);
      box-shadow: 0 0 15px rgba(0, 200, 255, 0.5);
    }
    .music-btn.playing {
      color: #ff6600;
      border-color: #ff6600;
      animation: pulse-music 2s infinite;
    }
    @keyframes pulse-music {
      0% { transform: scale(1); box-shadow: 0 0 0 rgba(255, 102, 0, 0); }
      50% { transform: scale(1.05); box-shadow: 0 0 10px rgba(255, 102, 0, 0.5); }
      100% { transform: scale(1); box-shadow: 0 0 0 rgba(255, 102, 0, 0); }
    }
    .user-info {
      display: flex;
      align-items: center;
    }
    .user-display-name {
      font-weight: bold;
      color: #ff6600;
      margin-right: 10px;
    }
    .user-header-badges {
      display: flex;
      gap: 5px;
    }
    .header-badge {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
    }
    .header-badge.shimmer {
      animation: badge-shimmer 2s;
    }
    @keyframes badge-shimmer {
      0% { transform: scale(1); box-shadow: 0 0 0 rgba(255, 255, 255, 0); }
      50% { transform: scale(1.5); box-shadow: 0 0 20px rgba(255, 255, 255, 0.8); }
      100% { transform: scale(1); box-shadow: 0 0 0 rgba(255, 255, 255, 0); }
    }
    .logo-text {
      font-size: 2.2rem;
      font-weight: bold;
      font-family: 'Impact', 'Arial Black', sans-serif;
      text-transform: uppercase;
      color: #FFD700; /* Gold color */
      letter-spacing: 1px;
      text-shadow:
        0 0 5px rgba(255, 215, 0, 0.7),
        0 0 10px rgba(255, 165, 0, 0.7),
        0 0 15px rgba(255, 140, 0, 0.7),
        0 0 20px rgba(255, 120, 0, 0.7),
        2px 2px 2px rgba(0, 0, 0, 0.5);
      animation: logo-text-glow 3s infinite alternate;
      transform: perspective(500px) rotateX(10deg);
      position: relative;
      z-index: 1;
    }

    /* Add a subtle fire-like effect behind the text */
    .logo-text::before {
      content: '';
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      background: radial-gradient(ellipse at center, rgba(255, 215, 0, 0.2) 0%, rgba(255, 140, 0, 0.1) 50%, rgba(255, 69, 0, 0) 70%);
      filter: blur(8px);
      z-index: -1;
      opacity: 0.8;
      animation: fire-pulse 2s infinite alternate;
    }

    @keyframes fire-pulse {
      0% { opacity: 0.6; transform: scale(0.98); }
      100% { opacity: 1; transform: scale(1.02); }
    }

    @keyframes logo-text-glow {
      0% { text-shadow:
        0 0 5px rgba(255, 215, 0, 0.7),
        0 0 10px rgba(255, 165, 0, 0.7),
        0 0 15px rgba(255, 140, 0, 0.7),
        0 0 20px rgba(255, 120, 0, 0.7),
        2px 2px 2px rgba(0, 0, 0, 0.5);
        color: #FFD700; }
      100% { text-shadow:
        0 0 10px rgba(255, 215, 0, 0.9),
        0 0 20px rgba(255, 165, 0, 0.9),
        0 0 30px rgba(255, 140, 0, 0.9),
        0 0 40px rgba(255, 120, 0, 0.9),
        2px 2px 2px rgba(0, 0, 0, 0.5);
        color: #FFF8DC; /* Slightly lighter gold at peak brightness */ }
    }
    @keyframes spin { from { transform: rotateY(0deg); } to { transform: rotateY(360deg); } }
    .tagline { font-style: italic; margin-top: 5px; font-size: 1.1rem; text-shadow: 1px 1px 0 rgba(0,0,0,0.5); }
    nav {
      margin-left: 20px;
    }
    nav ul {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    nav ul li {
      margin: 0;
    }
    nav ul li a {
      color: white;
      font-weight: bold;
      padding: 10px 15px;
      border-radius: 5px;
      background: linear-gradient(to bottom, #333333, #222222);
      transition: all 0.3s;
      font-size: 0.95rem;
      display: block;
      text-align: center;
      border: 1px solid #444;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    nav ul li a:hover {
      background: linear-gradient(to bottom, #ff6600, #ff4500);
      transform: translateY(-3px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
      border-color: #ff8800;
    }
    nav ul li a.active {
      background: linear-gradient(to bottom, #ff6600, #ff4500);
      border-color: #ff8800;
    }

    /* Hero Section */
    .hero {
      position: relative;
      min-height: 90vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      padding: 80px 20px;
    }
    .hero-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: url("images/DALL¬∑E 2025-03-22 17.45.58 - Create an epic, high-resolution background image divided into four distinct sections, styled in the iconic blocky and colorful art style of Roblox. __.webp") center/cover no-repeat;
      filter: brightness(0.6);
    }
    .hero-content {
      padding: 30px;
      background: rgba(0,0,0,0.7);
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(255,100,0,0.3);
      max-width: 1200px;
      border: 3px solid #ff6600;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 40px;
    }
    @media (min-width: 992px) {
      .hero-content {
        flex-direction: row;
        align-items: center;
        text-align: left;
      }
    }
    .hero-avatar {
      flex-shrink: 0;
      position: relative;
    }
    .leo-avatar {
      width: 250px;
      height: 250px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #ff6600;
      box-shadow: 0 0 30px rgba(255, 102, 0, 0.6);
      animation: avatar-glow 3s infinite alternate;
    }
    @keyframes avatar-glow {
      0% { box-shadow: 0 0 20px rgba(255, 102, 0, 0.6); }
      100% { box-shadow: 0 0 40px rgba(255, 102, 0, 0.8); }
    }
    .hero-text {
      flex: 1;
      text-align: center;
    }
    @media (min-width: 992px) {
      .hero-text {
        text-align: left;
      }
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
    }
    @media (min-width: 992px) {
      .hero-actions {
        justify-content: flex-start;
      }
    }

    .narrator-btn {
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #ff6600;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .narrator-btn:hover {
      background: rgba(255, 102, 0, 0.3);
    }

    /* Narrator Controls */
    .narrator-controls {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 500px;
      background: rgba(0, 0, 0, 0.95);
      color: white;
      padding: 25px;
      z-index: 1000;
      display: none;
      border: 2px solid #ff6600;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(255, 102, 0, 0.5);
    }

    .narrator-controls-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 15px;
    }

    .narrator-controls-header h3 {
      font-size: 1.5rem;
      margin: 0;
      color: #ff6600;
      text-shadow: 0 0 10px rgba(255, 102, 0, 0.5);
    }

    .close-btn {
      background: none;
      border: none;
      color: #ccc;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .close-btn:hover {
      color: #fff;
      transform: scale(1.1);
    }

    .narrator-options {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    /* Voice Selector Styles */
    .voice-selector {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
    }

    .voice-option {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid transparent;
      border-radius: 15px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }

    .voice-option:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-3px);
    }

    .voice-option.selected {
      border-color: #ff6600;
      background: rgba(255, 102, 0, 0.2);
      box-shadow: 0 0 15px rgba(255, 102, 0, 0.3);
    }

    .voice-icon {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .voice-icon.male {
      color: #00c8ff;
    }

    .voice-icon.female {
      color: #ff3c78;
    }

    .voice-label {
      font-weight: bold;
      color: #fff;
    }

    /* Language Selector Styles */
    .language-selector {
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    .language-option {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid transparent;
      border-radius: 15px;
      padding: 15px 25px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .language-option:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-3px);
    }

    .language-option.selected {
      border-color: #ff6600;
      background: rgba(255, 102, 0, 0.2);
      box-shadow: 0 0 15px rgba(255, 102, 0, 0.3);
    }

    .language-flag {
      font-size: 2rem;
      margin-bottom: 8px;
    }

    .language-name {
      font-weight: bold;
      color: #fff;
    }

    .narrator-controls-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
      justify-content: center;
    }

    .narrator-control-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      padding: 12px 25px;
      border-radius: 30px;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .narrator-control-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    .narrator-control-btn.primary {
      background: #ff6600;
      border-color: #ff6600;
      font-weight: bold;
    }

    .narrator-control-btn.primary:hover {
      background: #ff8800;
      box-shadow: 0 0 15px rgba(255, 102, 0, 0.5);
    }

    .narrator-control-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .narrator-control-btn:disabled:hover {
      transform: none;
      background: rgba(255, 255, 255, 0.1);
    }
    .hero h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      text-shadow: 3px 3px 0 rgba(255,60,0,0.8);
      color: #fff;
      line-height: 1.1;
    }
    @media (min-width: 768px) {
      .hero h1 {
        font-size: 3.5rem;
      }
    }
    .hero p {
      font-size: 1.1rem;
      margin-bottom: 20px;
      text-shadow: 1px 1px 0 #000;
      line-height: 1.6;
    }
    @media (min-width: 768px) {
      .hero p {
        font-size: 1.2rem;
      }
    }
    .btn {
      display: inline-block;
      background: #ff4500;
      color: white;
      padding: 15px 30px;
      border-radius: 30px;
      font-weight: bold;
      text-transform: uppercase;
      transition: all 0.3s;
      font-size: 1.2rem;
      border: 2px solid #fff;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    .btn:hover { background: #ff6600; transform: translateY(-5px) scale(1.05); box-shadow: 0 10px 20px rgba(0,0,0,0.4); }
    .pulse { animation: pulse 2s infinite; }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

    /* Section Titles */
    .section-title {
      text-align: center;
      font-size: 3rem;
      margin-bottom: 40px;
      color: #ff6600;
      position: relative;
      text-shadow: 2px 2px 0 #000;
    }
    .section-title::after {
      content: '';
      display: block;
      width: 100px;
      height: 5px;
      background: linear-gradient(to right, #ff3300, #ff9500);
      margin: 15px auto 0;
      border-radius: 5px;
    }

    /* Card Flip Styles (applies to characters, news, and blog cards) */
    .card-wrapper { perspective: 1000px; height: 400px; }
    .card {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.8s;
      transform-style: preserve-3d;
      cursor: pointer;
    }
    .card.flipped { transform: rotateY(180deg); }
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }
    .card-front { background: linear-gradient(135deg, #222 0%, #333 100%); border: 2px solid #444; }
    .card-back {
      background: linear-gradient(135deg, #333 0%, #444 100%);
      transform: rotateY(180deg);
      border: 2px solid #ff6600;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    .card-img { height: 250px; position: relative; overflow: hidden; }
    .card-img img { width: 100%; height: 100%; object-fit: cover; }
    .card-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      background: #ff4500;
      color: white;
      padding: 5px 10px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 0.8rem;
      z-index: 1;
      box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    }
    .card-content { padding: 15px; }
    .card-title { font-size: 1.4rem; margin-bottom: 5px; color: #ff6600; text-transform: uppercase; }
    .card-desc { color: #ccc; margin-bottom: 10px; font-size: 0.9rem; height: 60px; overflow: hidden; }
    .card-back-title { color: #ff6600; margin-bottom: 15px; font-size: 1.3rem; text-align: center; }
    .card-steps { margin-bottom: 15px; }
    .step { margin-bottom: 10px; padding-left: 20px; position: relative; }
    .step::before { content: '‚üê'; position: absolute; left: 0; color: #ff6600; }
    .code-block-container {
      position: relative;
      margin: 15px 0;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    .code-block {
      background: #1a1a1a;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.9rem;
      white-space: pre-wrap;
      color: #4ee44e;
      border: 1px solid #333;
      overflow-y: auto;
      max-height: 200px;
      flex-grow: 1;
    }
    .copy-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(0,0,0,0.5);
      color: #ccc;
      border: 1px solid #444;
      border-radius: 4px;
      padding: 5px 10px;
      font-size: 0.8rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s;
      z-index: 2;
    }
    .copy-btn:hover {
      background: rgba(255,102,0,0.3);
      color: #fff;
      border-color: #ff6600;
    }
    .copy-btn.copied {
      background: rgba(78,228,78,0.3);
      color: #4ee44e;
      border-color: #4ee44e;
    }

    /* Featured Characters Section */
    .featured-characters { padding: 60px 0; position: relative; overflow: hidden; }
    .cards-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
      padding: 20px 0;
    }

    /* Game News Section */
    .game-news { padding: 60px 0; background: linear-gradient(45deg, #222 0%, #333 100%); position: relative; overflow: hidden; }
    .news-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("images/news-bg.webp") center/cover no-repeat;
      opacity: 0.1;
      z-index: -1;
    }
    .news-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
      padding: 20px 0;
    }

    /* Blog Section */
    .blog-section {
      padding: 40px 0;
      background: linear-gradient(45deg, #1a1a1a 0%, #2a2a2a 100%);
      position: relative;
      overflow: hidden;
    }
    .news-toggle {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
      gap: 15px;
    }
    .news-toggle-btn {
      background: rgba(20,20,20,0.8);
      color: #ccc;
      border: 2px solid #444;
      padding: 10px 20px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1rem;
    }
    .news-toggle-btn:hover {
      background: rgba(255,100,0,0.2);
      border-color: #ff6600;
      transform: translateY(-2px);
    }
    .news-toggle-btn.active {
      background: #ff4500;
      color: white;
      border-color: #ff6600;
      box-shadow: 0 5px 15px rgba(255,100,0,0.3);
    }
    #livePosts {
      display: none;
    }
    .roblox-news-container {
      width: 100%;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 30px;
      border: 1px solid #333;
    }

    .news-feed-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .news-feed-header h3 {
      font-size: 1.5rem;
      color: #ff6600;
      margin: 0;
    }

    .refresh-btn {
      background: rgba(0,0,0,0.3);
      color: #ccc;
      border: 1px solid #444;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
    }

    .refresh-btn:hover {
      background: rgba(255,102,0,0.2);
      color: #fff;
      border-color: #ff6600;
    }

    .refresh-btn i {
      font-size: 0.9rem;
    }

    .roblox-news-feed {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .news-item {
      background: rgba(20,20,20,0.7);
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid #333;
      transition: all 0.3s;
    }

    .news-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      border-color: #ff6600;
    }

    .news-item-img {
      height: 180px;
      overflow: hidden;
    }

    .news-item-img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }

    .news-item:hover .news-item-img img {
      transform: scale(1.05);
    }

    .news-item-content {
      padding: 15px;
    }

    .news-item-meta {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 0.8rem;
      color: #aaa;
    }

    .news-item-title {
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: #fff;
      line-height: 1.3;
    }

    .news-item-excerpt {
      font-size: 0.9rem;
      color: #ccc;
      margin-bottom: 15px;
      line-height: 1.5;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .news-item-link {
      display: inline-block;
      color: #ff6600;
      font-size: 0.9rem;
      font-weight: bold;
      text-decoration: none;
      transition: all 0.3s;
    }

    .news-item-link:hover {
      color: #ff9900;
      text-decoration: underline;
    }

    #fallbackNewsContent {
      display: none;
    }

    .loading-news {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 30px;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      color: #ccc;
      font-size: 1.1rem;
      margin-top: 20px;
    }
    .blog-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("images/blog-bg.webp") center/cover no-repeat;
      opacity: 0.1;
      z-index: -1;
    }
    .blog-posts {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 30px;
    }

    /* Add responsive image handling for blog posts */
    @media (max-width: 768px) {
      .blog-posts {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      }
    }
    .blog-card {
      background: rgba(20,20,20,0.8);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 15px 30px rgba(0,0,0,0.4);
      border: 2px solid #444;
      transition: all 0.3s;
      cursor: pointer;
    }
    .blog-card:hover {
      transform: translateY(-10px);
      border-color: #ff6600;
      box-shadow: 0 20px 40px rgba(255,100,0,0.3);
    }
    .blog-img {
      height: auto;
      overflow: hidden;
      border-radius: 15px 15px 0 0;
    }
    .blog-img img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.5s;
    }
    .blog-card:hover .blog-img img { transform: scale(1.1); }
    .blog-content { padding: 20px; }
    .blog-meta {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      color: #aaa;
      font-size: 0.9rem;
    }
    .blog-date { margin-right: 15px; }
    .blog-category {
      background: #ff4500;
      color: white;
      padding: 3px 10px;
      border-radius: 10px;
      font-size: 0.8rem;
      font-weight: bold;
    }
    .blog-title {
      font-size: 1.5rem;
      margin-bottom: 10px;
      line-height: 1.3;
      color: #fff;
      text-transform: uppercase;
    }
    .blog-excerpt {
      color: #ccc;
      margin-bottom: 15px;
      font-size: 1rem;
    }
    .read-more {
      font-weight: bold;
      color: #00c8ff;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s;
    }
    .read-more:hover { transform: translateX(5px); color: #00e6ff; }

    /* Play Game Section */
    .play-game {
      padding: 60px 0;
      background: #000;
      text-align: center;
    }
    .play-game .btn {
      margin-top: 20px;
      background: #00c8ff;
      border-color: #00c8ff;
    }
    .play-game .btn:hover { background: #00a0d8; }

    /* Community Section */
    .community { padding: 60px 0; position: relative; overflow: hidden; }
    .community-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("images/community-bg.webp") center/cover no-repeat;
      opacity: 0.2;
      z-index: -1;
      filter: blur(5px);
    }
    .community-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      align-items: center;
    }
    .community-text {
      background: rgba(0,0,0,0.7);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 15px 30px rgba(0,0,0,0.4);
      border: 2px solid #444;
    }
    .community-text h2 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #ff6600;
      text-shadow: 2px 2px 0 #000;
    }
    .community-text p {
      margin-bottom: 25px;
      color: #ddd;
      font-size: 1.1rem;
    }
    .community-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }
    .stat-item {
      text-align: center;
      background: rgba(255,100,0,0.1);
      padding: 15px;
      border-radius: 15px;
      border: 1px solid rgba(255,100,0,0.3);
    }
    .stat-number {
      font-size: 2.5rem;
      font-weight: bold;
      color: #ff6600;
      margin-bottom: 5px;
      text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    .stat-label {
      color: #ccc;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .community-image {
      width: 100%;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 15px 30px rgba(0,0,0,0.5);
      border: 3px solid #444;
      transition: all 0.3s;
    }
    .community-image:hover {
      transform: scale(1.03);
      border-color: #ff6600;
      box-shadow: 0 20px 40px rgba(255,100,0,0.4);
    }

    /* Message Board Section */
    .message-board {
      padding: 60px 0;
      background: linear-gradient(45deg, #111 0%, #222 100%);
      position: relative;
    }
    .message-board-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("images/message-bg.webp") center/cover no-repeat;
      opacity: 0.1;
      z-index: -1;
    }
    .message-container {
      background: rgba(20,20,20,0.8);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 15px 30px rgba(0,0,0,0.5);
      border: 2px solid #444;
      max-width: 800px;
      margin: 0 auto;
    }
    .message-status {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 10px 15px;
      background: rgba(0,0,0,0.2);
      border-radius: 10px;
      font-size: 0.9rem;
    }
    .status-indicator {
      display: flex;
      align-items: center;
      gap: 5px;
      font-weight: bold;
    }
    .status-indicator.online { color: #4ee44e; }
    .status-indicator.offline { color: #ff4500; }
    .status-loading {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #ccc;
    }
    .spinner {
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: #ff6600;
      animation: spin 1s linear infinite;
    }
    .messages-list {
      margin-bottom: 30px;
      max-height: 400px;
      overflow-y: auto;
      padding: 20px;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      border: 1px solid #333;
      scrollbar-width: thin;
      scrollbar-color: #ff6600 #222;
    }
    .messages-list::-webkit-scrollbar {
      width: 8px;
    }
    .messages-list::-webkit-scrollbar-track {
      background: #222;
      border-radius: 10px;
    }
    .messages-list::-webkit-scrollbar-thumb {
      background-color: #ff6600;
      border-radius: 10px;
    }
    .message {
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid #333;
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .message:last-child { margin-bottom: 0; padding-bottom: 0; border-bottom: none; }
    .message-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .message-user { display: flex; align-items: center; gap: 10px; }
    .user-avatar {
      width: 40px;
      height: 40px;
      background: #ff6600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
      font-size: 1.2rem;
      border: 2px solid #ccc;
    }
    .user-name { font-weight: bold; color: #ff6600; font-size: 1.1rem; }
    .message-time { color: #888; font-size: 0.9rem; }
    .message-content {
      color: #ddd;
      font-size: 1rem;
      line-height: 1.5;
      word-break: break-word;
      white-space: pre-wrap;
    }
    .moderation-notice {
      display: flex;
      align-items: center;
      gap: 15px;
      background: rgba(255, 0, 0, 0.2);
      border: 3px solid rgba(255, 0, 0, 0.5);
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 30px;
      color: #ff3300;
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
    }
    .moderation-icon {
      font-size: 3rem;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    .moderation-text {
      font-size: 1.4rem;
      line-height: 1.6;
      font-weight: 900;
      text-shadow: 1px 1px 0 rgba(0,0,0,0.5);
      letter-spacing: 0.5px;
    }
    .moderation-text a {
      color: #ff6600;
      text-decoration: underline;
    }
    .message-warning {
      color: #ff4500;
      font-size: 0.9rem;
      margin-top: 5px;
      display: none;
    }
    .message-warning.show {
      display: block;
      animation: fadeIn 0.3s;
    }
    .message-form {
      background: rgba(0,0,0,0.3);
      padding: 20px;
      border-radius: 15px;
      border: 1px solid #333;
    }
    .form-group { margin-bottom: 15px; }
    .form-label { display: block; margin-bottom: 5px; color: #ccc; font-weight: bold; }
    .form-input {
      width: 100%;
      padding: 12px 15px;
      background: rgba(0,0,0,0.5);
      border: 1px solid #444;
      border-radius: 10px;
      color: #fff;
      font-size: 1rem;
      transition: all 0.3s;
    }
    .form-input:focus {
      outline: none;
      border-color: #ff6600;
      box-shadow: 0 0 10px rgba(255,100,0,0.3);
    }
    .form-textarea { min-height: 100px; resize: vertical; }
    .form-file {
      background: rgba(0,0,0,0.3);
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #333;
      color: #ccc;
      width: 100%;
    }
    .form-actions {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .form-button {
      background: #ff4500;
      color: white;
      border: none;
      padding: 15px 25px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      min-width: 150px;
    }
    .form-button:hover {
      background: #ff6600;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(255,100,0,0.3);
    }
    .form-button:disabled {
      background: #666;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    .send-status {
      color: #4ee44e;
      font-weight: bold;
      min-height: 20px;
    }
    .send-status.error {
      color: #ff4500;
    }

    /* Newsletter Section */
    .newsletter {
      padding: 60px 0;
      background: linear-gradient(135deg, #ff3300 0%, #ff9500 100%);
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .newsletter-particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("images/newsletter.webp") center/cover no-repeat;
      opacity: 0.1;
      z-index: -1;
    }
    .newsletter h2 {
      font-size: 3rem;
      margin-bottom: 15px;
      color: #fff;
      text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    .newsletter p {
      max-width: 600px;
      margin: 0 auto 30px;
      color: #fff;
      font-size: 1.2rem;
      text-shadow: 1px 1px 0 rgba(0,0,0,0.3);
    }
    .subscribe-form {
      max-width: 500px;
      margin: 0 auto;
      display: flex;
      background: rgba(255,255,255,0.1);
      padding: 5px;
      border-radius: 50px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    .subscribe-input {
      flex: 1;
      padding: 15px 25px;
      border: none;
      border-radius: 50px 0 0 50px;
      font-size: 1rem;
      background: rgba(255,255,255,0.9);
    }
    .subscribe-input:focus { outline: none; }
    .subscribe-btn {
      background: #222;
      color: white;
      border: none;
      padding: 0 25px;
      border-radius: 0 50px 50px 0;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1rem;
      text-transform: uppercase;
    }
    .subscribe-btn:hover { background: #000; }

    /* Play Game Section */
    .play-game {
      padding: 80px 0;
      background: #111;
    }

    .roblox-player-container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
    }

    .roblox-player-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .roblox-player-header h3 {
      font-size: 1.5rem;
      color: #ff6600;
      margin: 0;
    }

    .player-controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .player-btn {
      background: rgba(0,0,0,0.3);
      color: #fff;
      border: 1px solid #444;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
      font-size: 0.9rem;
    }

    .player-btn:hover {
      background: rgba(255,102,0,0.2);
      border-color: #ff6600;
    }

    .player-btn.primary {
      background: #ff6600;
      border-color: #ff6600;
    }

    .player-btn.primary:hover {
      background: #ff8800;
      box-shadow: 0 0 15px rgba(255, 102, 0, 0.5);
    }

    .game-selector {
      background: rgba(0,0,0,0.3);
      color: #fff;
      border: 1px solid #444;
      padding: 8px 15px;
      border-radius: 5px;
      font-size: 0.9rem;
      min-width: 180px;
    }

    .game-selector option {
      background: #222;
      color: #fff;
    }

    .roblox-player-wrapper {
      width: 100%;
      background: #000;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
      margin-bottom: 20px;
      border: 2px solid #333;
    }

    .roblox-player {
      width: 100%;
      height: 0;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      position: relative;
    }

    .roblox-player iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }

    .player-placeholder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #111, #222);
    }

    .placeholder-content {
      text-align: center;
      padding: 20px;
      max-width: 600px;
    }

    .placeholder-logo {
      width: 100px;
      height: 100px;
      margin-bottom: 20px;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }

    .placeholder-content h3 {
      font-size: 1.8rem;
      margin-bottom: 15px;
      color: #ff6600;
    }

    .placeholder-content p {
      font-size: 1.1rem;
      color: #ccc;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .placeholder-features {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 20px;
    }

    .feature {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1rem;
      color: #ddd;
    }

    .feature i {
      color: #ff6600;
    }

    .player-info {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }

    @media (min-width: 768px) {
      .player-info {
        grid-template-columns: 1fr 1fr;
      }
    }

    .info-box {
      background: rgba(0,0,0,0.3);
      border-radius: 10px;
      padding: 20px;
      border: 1px solid #333;
    }

    .info-box h4 {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.2rem;
      margin-top: 0;
      margin-bottom: 15px;
      color: #ff6600;
    }

    .info-box p {
      font-size: 0.95rem;
      color: #ccc;
      line-height: 1.5;
      margin: 0;
    }

    .info-box a {
      color: #ff6600;
      text-decoration: underline;
      transition: all 0.3s;
    }

    .info-box a:hover {
      color: #ff9900;
    }

    /* About Us Section */
    .about-us {
      padding: 60px 0;
      background: linear-gradient(45deg, #1f1f1f 0%, #2f2f2f 100%); /* Slightly different gradient */
      position: relative;
      overflow: hidden;
      color: #ddd;
    }

    .about-bg { /* Optional background image/pattern */
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("images/footer-bg.webp") center/cover no-repeat; /* Reuse or use a new one */
      opacity: 0.08;
      z-index: -1;
    }

    .about-content {
      display: grid;
      grid-template-columns: 1fr; /* Default to single column */
      gap: 40px;
      background: rgba(0,0,0,0.6);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 15px 30px rgba(0,0,0,0.4);
      border: 2px solid #444;
    }

    /* Make it two columns on larger screens */
    @media (min-width: 992px) {
      .about-content {
        grid-template-columns: 1fr 1fr;
         align-items: flex-start; /* Align items top */
      }
    }


    .about-text h3,
    .community-rules h3 {
      font-size: 1.8rem;
      color: #ff6600;
      margin-bottom: 15px;
      text-shadow: 1px 1px 0 #000;
    }

    .about-text p,
    .community-rules p {
      margin-bottom: 15px;
      line-height: 1.7;
      font-size: 1.05rem;
      color: #ccc;
    }

    .about-text ul,
    .community-rules ul {
      list-style: none;
      padding-left: 0;
      margin-bottom: 20px;
    }

    .about-text ul li,
    .community-rules ul li {
      margin-bottom: 10px;
      padding-left: 25px;
      position: relative;
      color: #ddd;
    }

    /* Custom bullet points */
    .about-text ul li::before {
      content: '\1F4A5'; /* Or use other relevant emojis: ‚ú®, üíª, ü§ù */
      position: absolute;
      left: 0;
      color: #ff6600; /* Or adjust color */
      font-size: 1rem;
    }
    .community-rules ul li::before {
      content: ''; /* Default content */
      position: absolute;
      left: 0;
      top: 5px; /* Adjust vertical alignment */
      width: 15px;
      height: 15px;
      border-radius: 50%;
    }
    .community-rules ul li:nth-child(-n+3)::before { /* Rules 1-3: Good things */
       content: '\2705';
       font-size: 1rem;
       background: none; /* Override background */
       border: none; /* Override border */
       top: 0;
    }

    .community-rules ul li:nth-child(n+4)::before { /* Rules 4+: Bad things */
        content: '\274C';
        font-size: 1rem;
        background: none;
        border: none;
        top: 0;
    }


    .community-rules {
      background: rgba(255,100,0,0.05);
      padding: 25px;
      border-radius: 15px;
      border: 1px solid rgba(255,100,0,0.2);
    }

    .rules-warning {
      font-weight: bold;
      color: #ffc107; /* Warning color */
      font-size: 0.95rem;
      margin-top: 20px;
      border-top: 1px solid rgba(255,100,0,0.2);
      padding-top: 15px;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .about-content {
        padding: 20px;
      }
      .about-text h3,
      .community-rules h3 {
        font-size: 1.6rem;
      }
    }

    /* Footer */
    footer {
      background: #111;
      color: #ddd;
      padding: 60px 0 20px;
      position: relative;
    }
    .footer-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("images/footer-bg.webp") center/cover no-repeat;
      opacity: 0.05;
      z-index: -1;
    }
    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 40px;
      margin-bottom: 40px;
    }
    .footer-col h3 {
      color: #ff6600;
      margin-bottom: 20px;
      font-size: 1.5rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .footer-col p { margin-bottom: 15px; color: #bbb; }
    .footer-links li { margin-bottom: 10px; }
    .footer-links a {
      color: #bbb;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .footer-links a:hover { color: #ff6600; transform: translateX(5px); }
    .footer-links a::before { content: '‚û§'; color: #ff6600; font-size: 0.8rem; }

    /* Live Game Feeds Styles */
    .live-feeds-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .live-feed h4 {
      color: #fff;
      margin-bottom: 10px;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .live-indicator {
      background: #ff6600;
      color: #fff;
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 10px;
      animation: pulse 2s infinite;
    }
    .game-feed {
      list-style: none;
      padding: 0;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      overflow: hidden;
    }
    .game-feed li {
      padding: 8px 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s;
    }
    .game-feed li:last-child {
      border-bottom: none;
    }
    .game-feed li:hover {
      background: rgba(255, 102, 0, 0.2);
    }
    .game-feed a {
      color: #ccc;
      text-decoration: none;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .game-feed a:hover {
      color: #ff6600;
    }
    .game-feed .game-title {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .game-feed .game-players {
      font-size: 0.8rem;
      color: #00c8ff;
      margin-left: 10px;
    }
    .loading-item {
      color: #888;
      font-style: italic;
      padding: 15px 12px;
    }
    .social-links { display: flex; gap: 15px; }
    .social-icon {
      width: 40px;
      height: 40px;
      background: #222;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ff6600;
      font-size: 1.2rem;
      transition: all 0.3s;
      border: 1px solid #333;
    }
    .social-icon:hover {
      background: #ff6600;
      color: #fff;
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(255,100,0,0.3);
    }
    .footer-bottom {
      text-align: center;
      padding-top: 20px;
      border-top: 1px solid #222;
      color: #888;
      font-size: 0.9rem;
    }
    .footer-logo {
      display: flex;
      justify-content: center;
      margin-bottom: 15px;
    }
    .footer-site-logo {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      animation: footer-logo-animation 6s infinite;
      box-shadow: 0 0 20px rgba(255, 102, 0, 0.6);
      transition: all 0.3s ease;
    }
    .footer-site-logo:hover {
      transform: scale(1.15);
      box-shadow: 0 0 30px rgba(255, 102, 0, 0.9);
    }
    @keyframes footer-logo-animation {
      0% { filter: brightness(1); transform: translateY(0); }
      50% { filter: brightness(1.3); transform: translateY(-10px); }
      100% { filter: brightness(1); transform: translateY(0); }
    }
  </style>
  <!-- Include Gun.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
</head>
<body>
  <!-- Audio Element for Roblox 2016 Theme -->
  <audio id="robloxTheme" loop>
    <source src="05. bluudanc.mp3" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>

  <!-- Header -->
  <header>
    <div class="container header-container">
      <div class="logo-container">
        <img src="logo.png" alt="Leo's Insight Logo" class="site-logo">
        <div class="logo-text">LEO'S INSIGHT</div>
      </div>
      <div class="hamburger-menu" id="hamburgerMenu">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <nav>
        <ul id="navMenu">
          <li><a href="#characters">Cool Characters</a></li>
          <li><a href="#blog">Game News &amp; Blog</a></li>
          <li><a href="#community">Our Squad</a></li>
          <li><a href="#play">Play</a></li>
          <li><a href="#message-board">Message HQ</a></li>
          <li><a href="#achievements">Achievements</a></li>
          <li><a href="#learning">Learning Center</a></li>
          <li><a href="#editor">Code Playground</a></li>
          <li><a href="#support">Support Us</a></li>
          <li><a href="#about">About Us</a></li>
        </ul>
      </nav>
      <div class="user-profile" id="userProfile">
        <button id="toggleMusic" class="music-btn"><i class="fas fa-music"></i></button>
        <button id="joinButton" class="join-btn">JOIN NOW</button>
        <div id="userInfo" class="user-info" style="display: none;">
          <span id="userDisplayName" class="user-display-name"></span>
          <div id="userHeaderBadges" class="user-header-badges"></div>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-bg"></div>
    <div class="container hero-content">
      <!-- NEW HERO CONTENT STARTS HERE -->
      <div class="hero-avatar">
        <img src="Leosavatr.png" alt="Leo's Avatar" class="leo-avatar">
      </div>
      <div class="hero-text">
        <h1>MASTER THE GAME. BUILD THE FUTURE.</h1>
        <p>
          Welcome to Leo's Insight ‚Äì where passion for Roblox meets the power to create. This platform transcends basic gameplay; we delve into strategy, mechanics, and the fundamental skills to shape your <em>own</em> worlds. Explore character potential through code, engage with development tutorials, and understand Roblox on a deeper level.
        </p>
        <p>
          Join a community dedicated not just to playing, but to learning, building, and collaborating responsibly. Here, we share knowledge, elevate skills, and foster a respectful environment for aspiring creators and dedicated players alike.
        </p>
        <div class="hero-actions">
          <a href="#characters" class="btn pulse">EXPLORE THE INSIGHT</a>
          <button id="playNarration" class="btn narrator-btn"><i class="fas fa-play"></i> PLAY NARRATION</button>
        </div>
      </div>
      <!-- NEW HERO CONTENT ENDS HERE -->
    </div>

    <!-- Narrator Controls -->
    <div class="narrator-controls" id="narratorControls">
      <div class="narrator-controls-header">
        <h3>Choose Your Narrator!</h3>
        <button id="closeNarratorControls" class="close-btn"><i class="fas fa-times"></i></button>
      </div>
      <div class="narrator-options">
        <div class="voice-selector">
          <div class="voice-option" data-voice="male1">
            <div class="voice-icon male">üë®</div>
            <div class="voice-label">Cool Guy</div>
          </div>
          <div class="voice-option" data-voice="male2">
            <div class="voice-icon male">üë®‚ÄçüöÄ</div>
            <div class="voice-label">Space Dude</div>
          </div>
          <div class="voice-option" data-voice="female1">
            <div class="voice-icon female">üë©</div>
            <div class="voice-label">Awesome Girl</div>
          </div>
          <div class="voice-option" data-voice="female2">
            <div class="voice-icon female">üë©‚Äçüé§</div>
            <div class="voice-label">Rock Star</div>
          </div>
        </div>
        <div class="language-selector">
          <div class="language-option selected" data-lang="en-US">
            <div class="language-flag">üá∫üá∏</div>
            <div class="language-name">English</div>
          </div>
          <div class="language-option" data-lang="es-ES">
            <div class="language-flag">üá™üá∏</div>
            <div class="language-name">Spanish</div>
          </div>
        </div>
        <div class="narrator-controls-buttons">
          <button id="startNarration" class="narrator-control-btn primary"><i class="fas fa-play"></i> Play Narration</button>
          <button id="stopNarration" class="narrator-control-btn" disabled><i class="fas fa-stop"></i> Stop</button>
        </div>
      </div>
    </div>

    <!-- Hidden Narrator Script -->
    <div id="narratorScript" style="display: none;">
      <p class="narration-line">In a world where imagination becomes reality...</p>
      <p class="narration-line">One community stands above the rest.</p>
      <p class="narration-line">Welcome to Leo's Insight - where legends are born and skills are forged!</p>
      <p class="narration-line">Master the art of Roblox creation. Build worlds that defy expectations.</p>
      <p class="narration-line">Join our elite squad of creators and gamers.</p>
      <p class="narration-line">The future of Roblox isn't just played... it's created. Here. Now.</p>
      <p class="narration-line">Leo's Insight - Your destiny awaits!</p>
    </div>
  </section>

  <!-- Featured Characters Section (12 Cards) -->
  <section class="featured-characters" id="characters">
    <div class="container">
      <h2 class="section-title">EPIC CHARACTERS</h2>
      <div class="cards-container">
        <!-- Card 1: Doomslayer -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img loading="lazy" src="images/top3.png" alt="Doomslayer">
                <div class="card-badge">DARK</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Doomslayer</h3>
                <p class="card-desc">An intimidating warrior with dark, imposing armor and a menacing presence.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Fear Aura (Doomslayer)</h3>
              <div class="card-steps">
                <div class="step">Activate: Tint parts red and reduce opacity</div>
                <div class="step">Deactivate: Restore appearance</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- FearAura Module
local FearAura = {}

function FearAura:Activate(player)
  local character = player.Character
  if not character then return end
  for _, part in pairs(character:GetDescendants()) do
    if part:IsA("BasePart") then
      part.Transparency = 0.5
      part.Color = Color3.new(1, 0, 0)
    end
  end
end

function FearAura:Deactivate(player)
  local character = player.Character
  if not character then return end
  for _, part in pairs(character:GetDescendants()) do
    if part:IsA("BasePart") then
      part.Transparency = 0
      part.Color = Color3.new(1, 1, 1)
    end
  end
end

return FearAura</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 2: Berserker -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img src="images/DALL¬∑E 2025-03-22 15.52.12 - Create a stylized version of Guts from Berserk reimagined as a Roblox character for a character card. Capture Guts‚Äô fierce determination, rugged armor.webp" alt="Berserker">
                <div class="card-badge">BERSERK</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Berserker</h3>
                <p class="card-desc">A fierce warrior wielding a massive sword.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Rage Mode (Berserker)</h3>
              <div class="card-steps">
                <div class="step">Boost WalkSpeed &amp; Health</div>
                <div class="step">Reset after 30 seconds</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- RageMode Module
local RageMode = {}

function RageMode:Activate(player)
  local character = player.Character
  if not character then return end
  local humanoid = character:FindFirstChildOfClass("Humanoid")
  if not humanoid then return end

  local origSpeed = humanoid.WalkSpeed
  local origMaxHealth = humanoid.MaxHealth
  humanoid.WalkSpeed = origSpeed * 1.5
  humanoid.MaxHealth = origMaxHealth * 1.5
  humanoid.Health = humanoid.MaxHealth

  delay(30, function()
    humanoid.WalkSpeed = origSpeed
    humanoid.MaxHealth = origMaxHealth
    if humanoid.Health &gt; origMaxHealth then
      humanoid.Health = origMaxHealth
    end
  end)
end

return RageMode</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 3: Slam Dunk -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img src="images/DALL¬∑E 2025-03-22 15.57.00 - Create a realistic Roblox-style basketball player character, designed exactly in the blocky and simplified style of Roblox avatars. The character shou.webp" alt="Slam Dunk">
                <div class="card-badge">SPORTS</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Slam Dunk</h3>
                <p class="card-desc">A prodigy with incredible jumping ability and court vision.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Super Jump (Slam Dunk)</h3>
              <div class="card-steps">
                <div class="step">Apply upward force using BodyVelocity</div>
                <div class="step">Remove force after 0.5 seconds</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- SuperJump Module
local SuperJump = {}

function SuperJump:Perform(player)
  local character = player.Character
  if not character then return end
  local humanoid = character:FindFirstChildOfClass("Humanoid")
  local root = character:FindFirstChild("HumanoidRootPart")
  if not humanoid or not root then return end

  local bv = Instance.new("BodyVelocity", root)
  bv.Velocity = Vector3.new(0, 120, 0)
  bv.MaxForce = Vector3.new(0, math.huge, 0)
  delay(0.5, function() bv:Destroy() end)
end

return SuperJump</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 4: Touchdown -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img src="images/DALL¬∑E 2025-03-22 15.59.51 - Create a 3D Roblox-style American football player character in the exact blocky form used in Roblox games. The character should have the classic Roblo.webp" alt="Touchdown">
                <div class="card-badge">SPORTS</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Touchdown</h3>
                <p class="card-desc">A powerful player with speed and tackling prowess.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Tackle (Touchdown)</h3>
              <div class="card-steps">
                <div class="step">Apply force in the given direction</div>
                <div class="step">Reset after 0.75 seconds</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- TackleAbility Module
local TackleAbility = {}

function TackleAbility:Perform(player, direction)
  local character = player.Character
  if not character then return end
  local humanoid = character:FindFirstChildOfClass("Humanoid")
  local root = character:FindFirstChild("HumanoidRootPart")
  if not humanoid or not root then return end

  local bv = Instance.new("BodyVelocity", root)
  bv.Velocity = direction * 50
  bv.MaxForce = Vector3.new(100000, 0, 100000)
  delay(0.75, function() bv:Destroy() end)
end

return TackleAbility</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 5: Blue Lock -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img src="images/DALL¬∑E 2025-03-22 16.01.36 - Create a 3D Roblox-style soccer player character inspired by Blue Lock, using the exact blocky form of Roblox avatars. The character should wear a sty.webp" alt="Blue Lock">
                <div class="card-badge">SPORTS</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Blue Lock</h3>
                <p class="card-desc">A dynamic player with unmatched dribbling and shooting skills.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Precision Shot (Blue Lock)</h3>
              <div class="card-steps">
                <div class="step">Calculate direction toward target</div>
                <div class="step">Apply shot velocity</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- PrecisionShot Module
local PrecisionShot = {}

function PrecisionShot:Perform(player, targetPos)
  local character = player.Character
  if not character then return end
  local root = character:FindFirstChild("HumanoidRootPart")
  if not root then return end
  local direction = (targetPos - root.Position).unit
  local bv = Instance.new("BodyVelocity", root)
  bv.Velocity = direction * 100
  bv.MaxForce = Vector3.new(100000,100000,100000)
  delay(1, function() bv:Destroy() end)
end

return PrecisionShot</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 6: Fusion Hero -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img src="images/DALL¬∑E 2025-03-22 15.11.07 - Create a group of three dynamic Roblox-style characters in a superhero and kung fu fusion theme. Character 1_ A masked martial arts hero with a glowin.webp" alt="Fusion Hero">
                <div class="card-badge">HERO</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Fusion Hero</h3>
                <p class="card-desc">A fighter blending superhero flair with martial arts mastery.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Combo Attack (Fusion Hero)</h3>
              <div class="card-steps">
                <div class="step">Play combo attack animation</div>
                <div class="step">Chain multiple moves</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- ComboAttack Module
local ComboAttack = {}

function ComboAttack:Perform(player)
  local character = player.Character
  if not character then return end
  local humanoid = character:FindFirstChildOfClass("Humanoid")
  if not humanoid then return end

  local anim = Instance.new("Animation")
  anim.AnimationId = "rbxassetid://123456789" -- Replace with real animation ID
  local track = humanoid:LoadAnimation(anim)
  track:Play()
  print("Combo attack executed")
end

return ComboAttack</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 7: Ghoststrike -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img loading="lazy" src="images/DALL¬∑E 2025-03-22 15.24.15 - Create a single detailed Roblox-style character inspired by Call of Duty, styled for a character card. Character Name_ Ghoststrike. Description_ A mod.webp" alt="Ghoststrike">
                <div class="card-badge">ELITE</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Ghoststrike</h3>
                <p class="card-desc">A tactical specialist with stealth abilities and precision targeting.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Stealth Ability (Ghoststrike)</h3>
              <div class="card-steps">
                <div class="step">Activate: Increase transparency</div>
                <div class="step">Deactivate: Restore appearance</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- StealthAbility Module
local StealthAbility = {}

function StealthAbility:Activate(player)
  local character = player.Character
  if not character then return end
  for _, part in pairs(character:GetDescendants()) do
    if part:IsA("BasePart") then
      part.Transparency = 0.7
    end
  end
  print("Stealth activated")
end

function StealthAbility:Deactivate(player)
  local character = player.Character
  if not character then return end
  for _, part in pairs(character:GetDescendants()) do
    if part:IsA("BasePart") then
      part.Transparency = 0
    end
  end
  print("Stealth deactivated")
end

return StealthAbility</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 8: Shieldborn -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img loading="lazy" src="images/DALL¬∑E 2025-03-22 15.25.22 - Create a single Roblox-style military character in a stylized, slightly less realistic design, styled for a character card. Character Name_ Shieldborn.webp" alt="Shieldborn">
                <div class="card-badge">TANK</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Shieldborn</h3>
                <p class="card-desc">A defense specialist with advanced shield technology.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Shield Barrier (Shieldborn)</h3>
              <div class="card-steps">
                <div class="step">Clone shield model from ReplicatedStorage</div>
                <div class="step">Deploy in front of player</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- ShieldBarrier Module
local ShieldBarrier = {}
local ReplicatedStorage = game:GetService("ReplicatedStorage")

function ShieldBarrier:Deploy(player, position, rotation)
  local shieldTemplate = ReplicatedStorage:FindFirstChild("ShieldBarrier")
  if not shieldTemplate then return end
  local shield = shieldTemplate:Clone()
  shield:SetPrimaryPartCFrame(CFrame.new(position, position + rotation))
  shield.Parent = workspace
  game:GetService("Debris"):AddItem(shield, 30)
  print("Shield deployed")
  return shield
end

return ShieldBarrier</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 9: Commander Blitz -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img src="images/DALL¬∑E 2025-03-22 15.25.49 - Create a single detailed Roblox-style character in a military and war-inspired style, styled for a character card. Character Name_ Commander Blitz. De.webp" alt="Commander Blitz">
                <div class="card-badge">LEADER</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Commander Blitz</h3>
                <p class="card-desc">A tactical genius with advanced team buff abilities.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Commander Buff (Commander Blitz)</h3>
              <div class="card-steps">
                <div class="step">Boost teammates within a radius</div>
                <div class="step">Reset after 30 seconds</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- CommanderBuff Module
local CommanderBuff = {}
local Players = game:GetService("Players")

function CommanderBuff:ActivateTeamBoost(commander, radius)
  local character = commander.Character
  if not character then return end
  local humanoid = character:FindFirstChildOfClass("Humanoid")
  if not humanoid then return end
  local pos = character.HumanoidRootPart.Position
  local teamColor = commander.TeamColor
  for _, player in pairs(Players:GetPlayers()) do
    if player.TeamColor == teamColor and player ~= commander then
      local pChar = player.Character
      if pChar and pChar:FindFirstChild("HumanoidRootPart") then
        local dist = (pChar.HumanoidRootPart.Position - pos).Magnitude
        if dist &lt;= radius then
          self:BuffPlayer(player, 30)
        end
      end
    end
  end
end

function CommanderBuff:BuffPlayer(player, duration)
  local character = player.Character
  if not character then return end
  local humanoid = character:FindFirstChildOfClass("Humanoid")
  if humanoid then
    local origSpeed = humanoid.WalkSpeed
    local origJump = humanoid.JumpPower
    humanoid.WalkSpeed = origSpeed * 1.3
    humanoid.JumpPower = origJump * 1.2
    delay(duration, function()
      if humanoid and humanoid.Parent then
        humanoid.WalkSpeed = origSpeed
        humanoid.JumpPower = origJump
      end
    end)
  end
end

return CommanderBuff</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 10: Ran -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img src="images/DALL¬∑E 2025-03-22 15.27.24 - Create a stylized Roblox-style character inspired by Gears of War, designed for a character card. Character Name_ Ran. Description_ A heavy-armored wa.webp" alt="Ran">
                <div class="card-badge">DESTROYER</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Ran</h3>
                <p class="card-desc">A warrior known for his devastating ground slam attack.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Ground Slam (Ran)</h3>
              <div class="card-steps">
                <div class="step">Stun nearby enemies</div>
                <div class="step">Reset after animation</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- GroundSlam Module
local GroundSlam = {}
local ReplicatedStorage = game:GetService("ReplicatedStorage")

function GroundSlam:Perform(player)
  local character = player.Character
  if not character then return end
  local humanoid = character:FindFirstChildOfClass("Humanoid")
  local root = character:FindFirstChild("HumanoidRootPart")
  if not humanoid or not root then return end

  local origSpeed = humanoid.WalkSpeed
  humanoid.WalkSpeed = 0

  local slamEffect = Instance.new("Part")
  slamEffect.Shape = Enum.PartType.Cylinder
  slamEffect.Size = Vector3.new(0.5, 25, 25)
  slamEffect.CFrame = CFrame.new(root.Position) * CFrame.Angles(0, math.rad(90), 0)
  slamEffect.Anchored = true
  slamEffect.CanCollide = false
  slamEffect.Material = Enum.Material.Neon
  slamEffect.Color = Color3.fromRGB(255,100,0)
  slamEffect.Transparency = 0.5
  slamEffect.Parent = workspace
  game:GetService("Debris"):AddItem(slamEffect, 1.5)

  delay(2, function() humanoid.WalkSpeed = origSpeed end)
  print("Ground slam executed")
end

return GroundSlam</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 11: Saber Wolf -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img src="images/DALL¬∑E 2025-03-22 15.29.53 - Create a simplified 3D Roblox-style character named Saber Wolf, designed with a clean, blocky, kid-friendly look. Character Name_ Saber Wolf. Descript.webp" alt="Saber Wolf">
                <div class="card-badge">SWIFT</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Saber Wolf</h3>
                <p class="card-desc">A warrior with lightning-fast dashing abilities.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Dash Attack (Saber Wolf)</h3>
              <div class="card-steps">
                <div class="step">Lock controls during dash</div>
                <div class="step">Apply rapid dash force</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- DashAttack Module
local DashAttack = {}
local RunService = game:GetService("RunService")

function DashAttack:Perform(player, direction)
  local character = player.Character
  if not character then return end
  local humanoid = character:FindFirstChildOfClass("Humanoid")
  local root = character:FindFirstChild("HumanoidRootPart")
  if not humanoid or not root then return end

  local origSpeed = humanoid.WalkSpeed
  humanoid.WalkSpeed = 0

  local bv = Instance.new("BodyVelocity", root)
  bv.Velocity = direction * 120
  bv.MaxForce = Vector3.new(100000, 100000, 100000)

  local connection = RunService.Heartbeat:Connect(function()
    local clone = character:Clone()
    clone.Parent = workspace
    game:GetService("Debris"):AddItem(clone, 0.3)
  end)

  delay(0.5, function()
    connection:Disconnect()
    bv:Destroy()
    humanoid.WalkSpeed = origSpeed
  end)
end

return DashAttack</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card 12: Ghoststrike Alt -->
        <div class="card-wrapper">
          <div class="card" onclick="this.classList.toggle('flipped')">
            <div class="card-front">
              <div class="card-img">
                <img loading="lazy" src="images/DALL¬∑E 2025-03-22 15.51.23 - Create a single detailed Roblox-style character inspired by Call of Duty, styled for a character card. Character Name_ Ghoststrike. Focus on stealthy,.webp" alt="Ghoststrike Alt">
                <div class="card-badge">STEALTH</div>
              </div>
              <div class="card-content">
                <h3 class="card-title">Ghoststrike Alt</h3>
                <p class="card-desc">An alternate stealth design with a radar ping ability.</p>
              </div>
            </div>
            <div class="card-back">
              <h3 class="card-back-title">Radar Ping (Ghoststrike Alt)</h3>
              <div class="card-steps">
                <div class="step">Create a ping effect at player's position</div>
                <div class="step">Expand and remove after delay</div>
              </div>
              <div class="code-block-container">
                <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Copy</button>
                <div class="code-block">
-- RadarPing Module
local RadarPing = {}
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

function RadarPing:Activate(player)
  local character = player.Character
  if not character then return end
  local root = character:FindFirstChild("HumanoidRootPart")
  if not root then return end

  local ping = Instance.new("Part")
  ping.Shape = Enum.PartType.Ball
  ping.Size = Vector3.new(1,1,1)
  ping.CFrame = CFrame.new(root.Position)
  ping.Anchored = true
  ping.CanCollide = false
  ping.Material = Enum.Material.Neon
  ping.Color = Color3.fromRGB(0,200,255)
  ping.Transparency = 0.5
  ping.Parent = workspace

  local maxRadius = 50
  local expandSteps = 30
  local stepDelay = 3 / expandSteps

  for i = 1, expandSteps do
    local radius = (i / expandSteps) * maxRadius
    ping.Size = Vector3.new(radius, radius, radius)
    ping.Transparency = 0.5 + (i / expandSteps) * 0.5
    wait(stepDelay)
  end

  ping:Destroy()
end

return RadarPing</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Roblox Script Editor Section -->
  <section class="script-editor-section" id="editor">
    <div class="editor-bg"></div>
    <div class="container">
      <h2 class="section-title">CODE WITH LEO</h2>
      <div class="editor-content">
        <div class="editor-intro">
          <h3 class="editor-subtitle">Roblox Script Playground</h3>
          <p class="editor-desc">
            Write, save, and export Lua scripts for your Roblox games. Practice your coding skills and earn badges as you master the art of Roblox scripting!
          </p>
          <div class="editor-features">
            <div class="editor-feature">
              <i class="fas fa-save"></i>
              <span>Save scripts locally</span>
            </div>
            <div class="editor-feature">
              <i class="fas fa-download"></i>
              <span>Export as .lua files</span>
            </div>
            <div class="editor-feature">
              <i class="fas fa-medal"></i>
              <span>Earn coding badges</span>
            </div>
            <div class="editor-feature">
              <i class="fas fa-graduation-cap"></i>
              <span>Learn Roblox scripting</span>
            </div>
          </div>
        </div>
        <div class="editor-workspace">
          <div class="editor-header">
            <div class="editor-tabs">
              <div class="editor-tab active">leos_script.lua</div>
              <div class="editor-tab">+ New Script</div>
            </div>
            <div class="editor-controls">
              <button id="saveScriptBtn" class="editor-btn"><i class="fas fa-save"></i> Save</button>
              <button id="loadScriptBtn" class="editor-btn"><i class="fas fa-folder-open"></i> Load</button>
              <button id="downloadScriptBtn" class="editor-btn"><i class="fas fa-download"></i> Export</button>
              <button id="submitScriptBtn" class="editor-btn primary"><i class="fas fa-paper-plane"></i> Submit</button>
            </div>
          </div>
          <div class="editor-main">
            <textarea id="luaEditor" class="lua-editor" spellcheck="false">-- Welcome to Leo's Roblox Script Editor!
-- Write your Lua code below:

local part = Instance.new("Part")
part.Parent = workspace
part.Size = Vector3.new(4, 1, 4)
part.Position = Vector3.new(0, 10, 0)
part.Anchored = true
part.BrickColor = BrickColor.new("Bright orange")

print("Hello from Leo's Insight!")

-- Try creating your own scripts and earn badges!</textarea>
          </div>
          <div id="editorStatus" class="editor-status"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Donation/Gift Box Section -->
  <section class="donation-section" id="support">
    <div class="donation-bg"></div>
    <div class="container">
      <h2 class="section-title">SUPPORT LEO'S INSIGHT</h2>
      <div class="donation-content">
        <div class="donation-text">
          <h3 class="donation-subtitle">Help Us Keep Creating</h3>
          <p class="donation-desc">
            Leo's Insight is a passion project dedicated to helping young Roblox creators learn, grow, and connect. Your support, no matter how small, helps us continue providing free resources, tutorials, and community features.
          </p>
          <div class="donation-features">
            <div class="donation-feature">
              <i class="fas fa-rocket"></i>
              <span>Fund new tutorials</span>
            </div>
            <div class="donation-feature">
              <i class="fas fa-server"></i>
              <span>Keep servers running</span>
            </div>
            <div class="donation-feature">
              <i class="fas fa-paint-brush"></i>
              <span>Create better content</span>
            </div>
            <div class="donation-feature">
              <i class="fas fa-heart"></i>
              <span>Support our mission</span>
            </div>
          </div>
        </div>
        <div class="donation-box">
          <div class="gift-box">
            <div class="gift-box-lid">
              <div class="gift-lid-top"></div>
              <div class="gift-lid-side"></div>
            </div>
            <div class="gift-box-base">
              <div class="gift-box-front"></div>
              <div class="gift-box-back"></div>
              <div class="gift-box-left"></div>
              <div class="gift-box-right"></div>
              <div class="gift-box-bottom"></div>
              <div class="gift-box-inside"></div>
            </div>
            <div class="gift-ribbon-v"></div>
            <div class="gift-ribbon-h"></div>
          </div>
          <div class="donation-info">
            <h4>Every Contribution Helps!</h4>
            <p>Thank you for considering supporting Leo's Insight. Your generosity makes a difference!</p>
            <a href="https://buy.stripe.com/dR60283HVccj2hW9AF" target="_blank" class="donation-btn">
              <i class="fas fa-gift"></i> Support Leo's Insight
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Blog Section (Flippable Blog Cards) -->
  <section class="blog-section" id="blog">
    <div class="blog-bg"></div>
    <div class="container">
      <h2 class="section-title">LATEST BLOG POSTS</h2>
      <div class="news-toggle">
        <button id="staticNewsBtn" class="news-toggle-btn active">Our Posts</button>
        <button id="liveNewsBtn" class="news-toggle-btn">Live Roblox News</button>
      </div>
      <div class="blog-posts" id="staticPosts">
        <!-- Blog Card 1: New Battle Arena Map: Volcanic Fortress -->
        <div class="blog-card" onclick="this.classList.toggle('flipped')">
          <div class="blog-img">
            <img loading="lazy" src="images/aa8d321b-227b-477d-b192-374f826e7b9e.webp" alt="New Battle Arena Map: Volcanic Fortress">
          </div>
          <div class="blog-content">
            <div class="blog-meta">
              <span class="blog-date">March 21, 2025</span>
              <span class="blog-category">Update</span>
            </div>
            <h3 class="blog-title">New Battle Arena Map: Volcanic Fortress</h3>
            <p class="blog-excerpt">
              On March 21, 2025, a new map called "Volcanic Fortress" was released for the Battle Arena game. Explore hidden shortcuts, deadly traps, and a lava-themed environment.
            </p>
          </div>
          <div class="card-back">
            <h3 class="card-back-title">New Battle Arena Map: Volcanic Fortress</h3>
            <div class="card-steps">
              <div class="step">Released: March 21, 2025</div>
              <div class="step">Hidden shortcuts for strategic gameplay</div>
              <div class="step">Deadly traps to challenge players</div>
              <div class="step">Lava-themed environment</div>
            </div>
            <div class="code-block">
-- Map Update: Volcanic Fortress
print("Discover new challenges in Volcanic Fortress!")
            </div>
          </div>
        </div>
        <!-- Blog Card 2: Top 5 Defense Tactics -->
        <div class="blog-card" onclick="this.classList.toggle('flipped')">
          <div class="blog-img">
            <img loading="lazy" src="images/ced4e9b2-18ec-4f9a-8571-cf0bf9c86c58.webp" alt="Top 5 Defense Tactics">
          </div>
          <div class="blog-content">
            <div class="blog-meta">
              <span class="blog-date">March 20, 2025</span>
              <span class="blog-category">Strategy</span>
            </div>
            <h3 class="blog-title">Top 5 Defense Tactics</h3>
            <p class="blog-excerpt">
              A strategy guide released on March 20, 2025, focusing on essential defense tactics for protecting your base. Learn how to safeguard against raiders.
            </p>
          </div>
          <div class="card-back">
            <h3 class="card-back-title">Top 5 Defense Tactics</h3>
            <div class="card-steps">
              <div class="step">Guide Release: March 20, 2025</div>
              <div class="step">Crucial for base protection</div>
              <div class="step">Tactics for base building &amp; raiding</div>
            </div>
            <div class="code-block">
-- Defense Tactics Guide
print("Master these top 5 defense tactics!")
            </div>
          </div>
        </div>
        <!-- Blog Card 3: Weekend Battle Tournament -->
        <div class="blog-card" onclick="this.classList.toggle('flipped')">
          <div class="blog-img">
            <img loading="lazy" src="images/0c6aafe0-0c9d-4036-9f1f-103127d41199.webp" alt="Weekend Battle Tournament">
          </div>
          <div class="blog-content">
            <div class="blog-meta">
              <span class="blog-date">March 18, 2025</span>
              <span class="blog-category">Event</span>
            </div>
            <h3 class="blog-title">Weekend Battle Tournament</h3>
            <p class="blog-excerpt">
              An exciting battle royale event announced on March 18, 2025. Enjoy rare weapon skins, exclusive items, and more as part of "The Hunt: Mega Edition".
            </p>
          </div>
          <div class="card-back">
            <h3 class="card-back-title">Weekend Battle Tournament</h3>
            <div class="card-steps">
              <div class="step">Announced: March 18, 2025</div>
              <div class="step">Rare weapon skins as prizes</div>
              <div class="step">Exclusive character items</div>
              <div class="step">Part of The Hunt: Mega Edition (Mar 13-24, 2025)</div>
            </div>
            <div class="code-block">
-- Tournament Announcement
print("Prepare for the Weekend Battle Tournament!")
            </div>
          </div>
        </div>
      </div>
      <div class="blog-posts" id="livePosts">
        <!-- Live Roblox News Feed -->
        <div class="roblox-news-container">
          <div class="news-feed-header">
            <h3>LIVE ROBLOX NEWS</h3>
            <button id="refreshNewsFeed" class="refresh-btn"><i class="fas fa-sync-alt"></i> Refresh</button>
          </div>
          <div id="robloxNewsFeed" class="roblox-news-feed">
            <!-- News items will be loaded here -->
          </div>

          <!-- Loading indicator (hidden by default, shown when refreshing) -->
          <div class="loading-news" id="newsLoadingIndicator">
            <div class="spinner"></div>
            <span>Refreshing Roblox news...</span>
          </div>
        </div>

        <!-- Fallback content for SEO and initial display -->
        <div id="fallbackNewsContent">
          <div class="news-item">
            <div class="news-item-img">
              <img loading="lazy" src="images/fxeffect.png" alt="Roblox FX Boost" />
            </div>
            <div class="news-item-content">
              <div class="news-item-meta">
                <span class="news-item-date">April 10, 2025</span>
                <span class="news-item-category">Update</span>
              </div>
              <h3 class="news-item-title">Roblox April Update: Particle FX Boost</h3>
              <p class="news-item-excerpt">New rendering enhancements boost VFX performance by 35%. Try them now in Studio!</p>
              <button class="news-item-link">Read More ‚Üí</button>
            </div>
          </div>

          <div class="news-item">
            <div class="news-item-img">
              <img loading="lazy" src="images/top3.png" alt="Top Avatar Customizers" />
            </div>
            <div class="news-item-content">
              <div class="news-item-meta">
                <span class="news-item-date">April 5, 2025</span>
                <span class="news-item-category">Creator Tips</span>
              </div>
              <h3 class="news-item-title">Top 3 Avatar Customizers You Need</h3>
              <p class="news-item-excerpt">Explore these trending avatar plugins gaining popularity among Roblox creators.</p>
              <button class="news-item-link">Read More ‚Üí</button>
            </div>
          </div>

          <div class="news-item">
            <div class="news-item-img">
              <img loading="lazy" src="images/breaking_news.png" alt="Game Pass Revenue" />
            </div>
            <div class="news-item-content">
              <div class="news-item-meta">
                <span class="news-item-date">April 2, 2025</span>
                <span class="news-item-category">Economy</span>
              </div>
              <h3 class="news-item-title">Game Pass Revenue Hits Record High</h3>
              <p class="news-item-excerpt">Roblox devs earned over $300M in Q1. Learn how to optimize your Game Pass.</p>
              <button class="news-item-link">Read More ‚Üí</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Play Game Section -->
  <section class="play-game" id="play">
    <div class="container">
      <h2 class="section-title">PLAY ROBLOX GAMES</h2>
      <div class="roblox-player-container">
        <div class="roblox-player-header">
          <h3>EMBEDDED GAME PLAYER</h3>
          <div class="player-controls">
            <button id="signInRoblox" class="player-btn"><i class="fas fa-user"></i> Sign In</button>
            <select id="gameSelector" class="game-selector">
              <option value="">Select a Game</option>
              <option value="920587237">Adopt Me!</option>
              <option value="2753915549">Blox Fruits</option>
              <option value="4490140733">My Restaurant</option>
              <option value="6516141723">DOORS</option>
              <option value="6872265039">BedWars</option>
            </select>
            <button id="loadGame" class="player-btn primary"><i class="fas fa-gamepad"></i> Load Game</button>
          </div>
        </div>

        <div class="roblox-player-wrapper">
          <div id="robloxPlayerContainer" class="roblox-player">
            <!-- Game will be loaded here -->
            <div class="player-placeholder">
              <div class="placeholder-content">
                <img src="logo.png" alt="Leo's Insight Logo" class="placeholder-logo">
                <h3>Select a Game to Play</h3>
                <p>Choose from popular Roblox games in the dropdown above and click "Load Game" to start playing right here on Leo's Insight!</p>
                <div class="placeholder-features">
                  <div class="feature"><i class="fas fa-gamepad"></i> Play without leaving the site</div>
                  <div class="feature"><i class="fas fa-users"></i> Join with friends</div>
                  <div class="feature"><i class="fas fa-star"></i> Experience top Roblox games</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="player-info">
          <div class="info-box">
            <h4><i class="fas fa-info-circle"></i> How It Works</h4>
            <p>Our embedded player lets you enjoy Roblox games directly on Leo's Insight. Sign in with your Roblox account, select a game, and start playing without leaving the site!</p>
          </div>
          <div class="info-box">
            <h4><i class="fas fa-exclamation-triangle"></i> Having Issues?</h4>
            <p>If the embedded player doesn't work, you might need to <a href="https://www.roblox.com/download" target="_blank">install Roblox</a> first or check your browser settings.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Community Section -->
  <section class="community" id="community">
    <div class="community-bg"></div>
    <div class="container">
      <h2 class="section-title">JOIN OUR SQUAD</h2>
      <div class="community-content">
        <div class="community-text">
          <h2>BECOME A ROBLOX HERO!</h2>
          <p>Join thousands of gamers sharing strategies, creating epic characters, and leveling up together.</p>
          <div class="community-stats">
            <div class="stat-item">
              <div class="stat-number">4,835</div>
              <div class="stat-label">Squad Members</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">156</div>
              <div class="stat-label">Character Guides</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">712</div>
              <div class="stat-label">Game Strategies</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">23</div>
              <div class="stat-label">Pro Gamers</div>
            </div>
          </div>
          <a href="#" class="btn">JOIN NOW!</a>
        </div>
        <div class="community-image">
          <img loading="lazy" src="images/DALL¬∑E 2025-03-22 17.45.58 - Create an epic, high-resolution background image divided into four distinct sections, styled in the iconic blocky and colorful art style of Roblox. __.webp" alt="Community Image" />
        </div>
      </div>
    </div>
  </section>



  <!-- User Achievements Section -->
  <section class="user-badges" id="achievements">
    <div class="achievements-bg"></div>
    <div class="container">
      <h2 class="section-title">üèÜ YOUR ACHIEVEMENTS</h2>
      <div class="achievements-content">
        <div class="achievements-text">
          <h3 class="achievements-subtitle">LEO'S BADGE QUEST</h3>
          <p class="achievements-desc">
            Earn badges by participating in our community! Visit regularly, send messages, and contribute to unlock special achievements. Track your progress and show off your dedication.
          </p>
          <div class="badge-info">
            <h3>üéñÔ∏è How to Earn Badges</h3>
            <ul class="badge-list-info">
              <li>‚≠ê <strong>Newcomer</strong>: Join the site</li>
              <li>üõ°Ô∏è <strong>Active Member</strong>: Visit 5 times</li>
              <li>üí¨ <strong>Chatterbox</strong>: Send 3 messages</li>
              <li>ü•á <strong>Top Contributor</strong>: Reach 10 total interactions</li>
            </ul>
          </div>
        </div>
        <div class="badge-list" id="badgeList">
          <!-- Badges will be injected here via JavaScript -->
        </div>
      </div>
    </div>
  </section>

  <!-- Leo's Learning Center Section -->
  <section class="learning-center" id="learning">
    <div class="learning-bg"></div>
    <div class="container">
      <h2 class="section-title">LEO'S LEARNING CENTER</h2>
      <div class="learning-content">
        <div class="learning-header">
          <h3>BUILD YOUR ROBLOX PLAYER</h3>
          <p>Discover the best beginner-friendly video tutorials to help you learn how to develop, build, and shape Roblox characters using Roblox Studio. Start your game development journey today!</p>
        </div>
        <div class="tutorial-grid">
          <div class="tutorial-card">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/p005iduooyw" title="Ultimate Beginner Guide to Roblox Studio" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="tutorial-content">
              <h3 class="tutorial-title">ULTIMATE Beginner Guide to Roblox Studio</h3>
              <p class="tutorial-desc">Everything from installing Roblox Studio to building basic structures and navigating the interface.</p>
              <div class="tutorial-meta">
                <span class="tutorial-level">Beginner</span>
                <span>55 min</span>
              </div>
              <button class="expand-video-btn" data-video-id="p005iduooyw">Watch Full Screen</button>
            </div>
          </div>
          <div class="tutorial-card">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/nhRxmfto20c" title="The BEST guide to Roblox Scripting in 2024" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="tutorial-content">
              <h3 class="tutorial-title">Roblox Scripting Basics (2024)</h3>
              <p class="tutorial-desc">The BEST guide to Roblox Scripting in 2024 - Episode 1 (Printing)</p>
              <div class="tutorial-meta">
                <span class="tutorial-level">Beginner</span>
                <span>15 min</span>
              </div>
              <button class="expand-video-btn" data-video-id="nhRxmfto20c">Watch Full Screen</button>
            </div>
          </div>
          <div class="tutorial-card">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/aX0Kw_txrIY" title="How To Script On Roblox - Episode 1 (Properties) - AlvinBlox" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="tutorial-content">
              <h3 class="tutorial-title">How To Script On Roblox</h3>
              <p class="tutorial-desc">AlvinBlox teaches Roblox scripting fundamentals like properties and referencing objects.</p>
              <div class="tutorial-meta">
                <span class="tutorial-level">Beginner</span>
                <span>45 min</span>
              </div>
              <button class="expand-video-btn" data-video-id="aX0Kw_txrIY">Watch Full Screen</button>
            </div>
          </div>
          <div class="tutorial-card">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/L8Fg1pxPrzY" title="How To Make GUI | Roblox Studio" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="tutorial-content">
              <h3 class="tutorial-title">Creating GUI in Roblox</h3>
              <p class="tutorial-desc">A step-by-step guide to creating user interfaces for your Roblox games.</p>
              <div class="tutorial-meta">
                <span class="tutorial-level">Intermediate</span>
                <span>20 min</span>
              </div>
              <button class="expand-video-btn" data-video-id="L8Fg1pxPrzY">Watch Full Screen</button>
            </div>
          </div>
          <div class="tutorial-card">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/DanjB0cTfw0" title="Create character animations | Roblox Creator Hub" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="tutorial-content">
              <h3 class="tutorial-title">Character Animation in Roblox</h3>
              <p class="tutorial-desc">Learn how to create and implement custom animations for your Roblox characters.</p>
              <div class="tutorial-meta">
                <span class="tutorial-level">Intermediate</span>
                <span>25 min</span>
              </div>
              <button class="expand-video-btn" data-video-id="DanjB0cTfw0">Watch Full Screen</button>
            </div>
          </div>
          <div class="tutorial-card">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/Fm24WT5e4QQ" title="How To Make A Tower Defense Game In Roblox! (NO Scripting)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="tutorial-content">
              <h3 class="tutorial-title">Tower Defense Game Tutorial</h3>
              <p class="tutorial-desc">Learn how to build a tower defense game in Roblox with this detailed tutorial (NO Scripting).</p>
              <div class="tutorial-meta">
                <span class="tutorial-level">Intermediate</span>
                <span>30 min</span>
              </div>
              <button class="expand-video-btn" data-video-id="Fm24WT5e4QQ">Watch Full Screen</button>
            </div>
          </div>
          <div class="tutorial-card">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/t_AVxdkp7vA" title="Introduction to scripting | Roblox Creator Hub" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="tutorial-content">
              <h3 class="tutorial-title">Complete Game Development</h3>
              <p class="tutorial-desc">Introduction to scripting from the official Roblox Creator Hub documentation.</p>
              <div class="tutorial-meta">
                <span class="tutorial-level">Advanced</span>
                <span>60 min</span>
              </div>
              <button class="expand-video-btn" data-video-id="t_AVxdkp7vA">Watch Full Screen</button>
            </div>
          </div>
        </div>

        <!-- Video Modal for Full Screen Viewing -->
        <div id="videoModal" class="video-modal">
          <div class="video-modal-content">
            <span class="close-video-modal">&times;</span>
            <div class="modal-video-container">
              <iframe id="modalVideoFrame" src="about:blank" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Newsletter Section -->
  <section class="newsletter">
    <div class="newsletter-particles"></div>
    <div class="container">
      <h2>GET THE LATEST UPDATES!</h2>
      <p>Subscribe to our newsletter for exclusive game tips, character reveals, special event announcements, and more epic Roblox content!</p>
      <form class="subscribe-form">
        <input type="email" class="subscribe-input" placeholder="Enter your email address" aria-label="Email address for newsletter" required />
        <button type="submit" class="subscribe-btn">JOIN</button>
      </form>
    </div>
  </section>

  <!-- About Us & Community Rules Section -->
  <section class="about-us" id="about">
    <div class="about-bg"></div> <!-- Optional: Add a subtle background -->
    <div class="container">
      <h2 class="section-title">ABOUT LEO'S INSIGHT</h2>
      <div class="about-content">
        <div class="about-text">
          <h3>Welcome to the Squad!</h3>
          <p>
            Hey there, Roblox adventurers! Leo's Insight is your ultimate launchpad into the coolest parts of the Roblox universe. Created by Leo, a massive Roblox fan just like you, this place is all about sharing the excitement of playing *and* the awesome power of creating.
          </p>
          <p>
            Whether you're looking for tips on your favorite games, discovering epic character builds (with actual code you can learn from!), or dreaming of making your own blockbuster Roblox experience, you've landed in the right spot.
          </p>
          <h3>Our Mission: Play, Create, Connect!</h3>
          <p>
            Our goal is simple: To be the best hangout for young Roblox enthusiasts (ages 11-21) to:
          </p>
          <ul>
            <li>üí• <strong>Level Up Your Game:</strong> Find strategies, news, and character ideas.</li>
            <li>üíª <strong>Unlock Creator Mode:</strong> Learn Roblox Studio and Luau coding basics through easy-to-follow guides and tutorials.</li>
            <li>ü§ù <strong>Build Your Crew:</strong> Connect with other players and builders in a positive and supportive community.</li>
            <li>‚ú® <strong>Get Inspired:</strong> See what's possible and start building your own Roblox legacy!</li>
          </ul>
        </div>
        <div class="community-rules">
          <h3>Message HQ: Keep it Awesome!</h3>
          <p>
            Our Message HQ is where the community comes together. To make sure it's a great space for everyone, please follow these simple rules:
          </p>
          <ul>
            <li>‚úÖ <strong>Be Respectful:</strong> Treat everyone with kindness. No bullying, harassment, or hate speech. We're all here to enjoy Roblox!</li>
            <li>‚úÖ <strong>Keep it Clean:</strong> No swearing, inappropriate language, or offensive topics. Remember, players of different ages use this site.</li>
            <li>‚úÖ <strong>Stay On Topic (Mostly!):</strong> Share Roblox tips, achievements, ideas, or ask questions. A little friendly chat is cool too!</li>
            <li>‚ùå <strong>No Personal Info:</strong> NEVER share your real name, address, phone number, passwords, or other private information. Keep yourself safe!</li>
            <li>‚ùå <strong>No Spamming:</strong> Don't flood the chat with repetitive messages or advertisements.</li>
            <li>‚ùå <strong>No Links to Bad Stuff:</strong> Don't post links to scams, inappropriate websites, or anything harmful.</li>
          </ul>
          <p class="rules-warning">
            Breaking these rules might result in your messages being deleted or, in serious cases, being temporarily or permanently unable to post. Let's work together to keep Leo's Insight fun and safe for all Roblox fans!
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Message Board Section -->
  <section class="message-board" id="message-board">
    <div class="message-board-bg"></div>
    <div class="container">
      <h2 class="section-title">MESSAGE HQ</h2>
      <div class="message-container">
        <div class="message-status" id="messageStatus">
          <div class="status-indicator online">‚úì Connected</div>
          <div class="status-loading" id="loadingIndicator">
            <div class="spinner"></div>
            <span>Loading messages...</span>
          </div>
        </div>
        <div class="moderation-notice">
          <div class="moderation-icon">‚ö†Ô∏è</div>
          <div class="moderation-text">
            <strong>COMMUNITY SAFETY NOTICE:</strong> THIS MESSAGE BOARD IS MODERATED FOR OUR YOUNG COMMUNITY (AGES 11-21).
            INAPPROPRIATE LANGUAGE, BULLYING, AND PERSONAL INFORMATION WILL BE AUTOMATICALLY FILTERED.
            PLEASE FOLLOW OUR <a href="#about">COMMUNITY GUIDELINES</a>.
          </div>
        </div>
        <div class="messages-list" id="messagesList">
          <!-- Real-time messages will appear here via Gun.js -->
        </div>
        <form class="message-form" id="messageForm">
          <div class="form-group">
            <label class="form-label" for="username">Your Gamer Name</label>
            <input type="text" id="username" class="form-input" placeholder="Enter your gamer name" required />
          </div>
          <div class="form-group">
            <label class="form-label" for="message">Your Message</label>
            <textarea id="message" class="form-input form-textarea" placeholder="Share your game tips or achievements!" required></textarea>
            <div class="message-warning" id="messageWarning"></div>
          </div>
          <div class="form-group">
            <label class="form-label" for="file">Upload Screenshot or Video</label>
            <input type="file" id="file" class="form-file" accept="image/*,video/*" />
          </div>
          <div class="form-actions">
            <button type="submit" class="form-button" id="submitButton">POST MESSAGE</button>
            <div class="send-status" id="sendStatus"></div>
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="footer-bg"></div>
    <div class="container">
      <div class="footer-content">
        <div class="footer-col">
          <h3>ABOUT LEO'S INSIGHT</h3>
          <p>Leo's Insight is the ultimate dark-themed hub for Roblox gamers to learn about characters, strategies, and connect with each other. Created by gamers for gamers!</p>
          <div class="social-links">
            <a href="#" class="social-icon">YT</a>
            <a href="#" class="social-icon">IG</a>
            <a href="#" class="social-icon">DC</a>
            <a href="#" class="social-icon">TW</a>
          </div>
        </div>
        <div class="footer-col">
          <h3>QUICK LINKS</h3>
          <ul class="footer-links">
            <li><a href="#">Home</a></li>
            <li><a href="#characters">Cool Characters</a></li>
            <li><a href="#blog">Game News &amp; Blog</a></li>
            <li><a href="#community">Our Squad</a></li>
            <li><a href="#message-board">Message HQ</a></li>
            <li><a href="#achievements">Achievements</a></li>
            <li><a href="#learning">Learning Center</a></li>
            <li><a href="#about">About Us</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h3>LIVE GAME FEEDS</h3>
          <div class="live-feeds-container">
            <div class="live-feed">
              <h4>POPULAR GAMES <span class="live-indicator">LIVE</span></h4>
              <ul id="popularGamesFeed" class="game-feed">
                <li class="loading-item">Loading popular games...</li>
              </ul>
            </div>
            <div class="live-feed">
              <h4>UPCOMING GAMES <span class="live-indicator">LIVE</span></h4>
              <ul id="upcomingGamesFeed" class="game-feed">
                <li class="loading-item">Loading upcoming games...</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="footer-col">
          <h3>CONTACT US</h3>
          <ul class="footer-links">
            <li><a href="#">Email: leo@leosinsight.com</a></li>
            <li><a href="#">Discord: discord.gg/leosinsight</a></li>
            <li><a href="#">Contact Form</a></li>
            <li><a href="#">Support</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-logo">
          <img src="logo.png" alt="Leo's Insight Logo" class="footer-site-logo">
        </div>
        <p>&copy; 2025 Leo's Insight. Made with ‚ù§Ô∏è for Roblox gamers everywhere!</p>
      </div>
    </div>
  </footer>

  <!-- Gun.js Real-Time Messaging Integration with High-Concurrency Optimizations -->
  <script>
    // Initialize Gun.js with optimizations for 52,000+ concurrent users
    const gun = Gun({
      peers: [
        'https://gun-manhattan.herokuapp.com/gun',
        'https://gun-us.herokuapp.com/gun',
        'https://gun-eu.herokuapp.com/gun',
        'https://gun-relay.glitch.me/gun'
      ],
      localStorage: false,  // Disable localStorage for better performance
      radisk: false,       // Disable radisk for better performance
      axe: false,          // Disable Axe for better performance
      multicast: false,    // Disable multicast for better performance
      rtc: false,          // Disable WebRTC for better performance
      wait: 0,             // Reduce wait time for faster response
      retry: 1500,         // Increase retry delay to reduce server load
      chunk: 1024,         // Optimize chunk size for better network performance
      lack: 1000,          // Increase lack timeout for better performance
      gap: 500,            // Increase gap for better performance with high concurrency
      mesh: 250,           // Reduce mesh network updates for high concurrency
      pack: 5000,          // Increase pack size for better network efficiency
      memory: 2000         // Limit memory usage for better performance
    });

    // Create a connection pool for better handling of 52,000+ concurrent requests
    const connectionPool = {
      maxConnections: 100, // Increased for high concurrency
      activeConnections: 0,
      queue: [],
      priorityQueue: [], // Priority queue for critical operations
      lastCleanup: Date.now(),
      cleanupInterval: 30000, // 30 seconds

      // Get a connection from the pool
      getConnection: function(priority = false) {
        // Periodically clean up stale connections
        this._cleanupCheck();

        if (this.activeConnections < this.maxConnections) {
          this.activeConnections++;
          return Promise.resolve();
        } else {
          return new Promise(resolve => {
            if (priority) {
              this.priorityQueue.push({ resolve, timestamp: Date.now() });
            } else {
              this.queue.push({ resolve, timestamp: Date.now() });
            }
          });
        }
      },

      // Release a connection back to the pool
      releaseConnection: function() {
        if (this.priorityQueue.length > 0) {
          const { resolve } = this.priorityQueue.shift();
          resolve();
        } else if (this.queue.length > 0) {
          const { resolve } = this.queue.shift();
          resolve();
        } else {
          this.activeConnections = Math.max(0, this.activeConnections - 1);
        }
      },

      // Check and clean up stale connections
      _cleanupCheck: function() {
        const now = Date.now();
        if (now - this.lastCleanup > this.cleanupInterval) {
          // Clean up stale requests (older than 10 seconds)
          const staleTimeout = 10000;
          this.queue = this.queue.filter(item => now - item.timestamp < staleTimeout);
          this.priorityQueue = this.priorityQueue.filter(item => now - item.timestamp < staleTimeout);

          // Reset connection count if it seems stuck
          if (this.activeConnections > this.maxConnections * 0.9 && this.queue.length === 0 && this.priorityQueue.length === 0) {
            console.warn('Connection pool may be stuck, resetting count');
            this.activeConnections = Math.floor(this.maxConnections * 0.5);
          }

          this.lastCleanup = now;
        }
      }
    };

    // DOM Elements
    const messageForm = document.getElementById('messageForm');
    const messagesList = document.getElementById('messagesList');
    const usernameInput = document.getElementById('username');
    const messageInput = document.getElementById('message');
    const submitButton = document.getElementById('submitButton');
    const sendStatus = document.getElementById('sendStatus');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const statusIndicator = document.querySelector('.status-indicator');
    const hamburgerMenu = document.getElementById('hamburgerMenu');
    const navMenu = document.getElementById('navMenu');

    // Store username in localStorage for convenience
    if (localStorage.getItem('username')) {
      usernameInput.value = localStorage.getItem('username');
    }

    // Connection status monitoring
    let isOnline = true;
    window.addEventListener('online', updateConnectionStatus);
    window.addEventListener('offline', updateConnectionStatus);

    function updateConnectionStatus() {
      isOnline = navigator.onLine;
      if (isOnline) {
        statusIndicator.textContent = '‚úì Connected';
        statusIndicator.className = 'status-indicator online';
        submitButton.disabled = false;
      } else {
        statusIndicator.textContent = '‚úó Offline';
        statusIndicator.className = 'status-indicator offline';
        submitButton.disabled = true;
      }
    }

    // Debounce function to prevent rapid submissions
    function debounce(func, wait) {
      let timeout;
      return function(...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), wait);
      };
    }

    // Sanitize user input to prevent XSS
    function sanitizeInput(input) {
      const div = document.createElement('div');
      div.textContent = input;
      return div.innerHTML;
    }

    // Profanity filter and content moderation
    const profanityList = [
      'badword', 'swear', 'curse', 'profanity', 'explicit',
      // Add more words here as needed
    ];

    const bullyingPatterns = [
      'you are stupid', 'you are dumb', 'you suck', 'loser', 'noob', 'hate you',
      // Add more patterns here
    ];

    const personalInfoPatterns = [
      /\b\d{3}[-.\s]?\d{3}[-.\s]?\d{4}\b/, // Phone numbers
      /\b\d{5}(?:-\d{4})?\b/, // ZIP codes
      /\b(?:[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,})\b/, // Email addresses
      /\b(?:https?:\/\/)?(?:www\.)?(?:facebook|instagram|twitter|tiktok)\.com\/[A-Za-z0-9_.]+\b/i, // Social media profiles
      /\b(?:\d{1,3}\.){3}\d{1,3}\b/ // IP addresses
    ];

    // Check message for inappropriate content
    function checkMessageContent(message) {
      const lowerMessage = message.toLowerCase();
      const messageWarning = document.getElementById('messageWarning');

      // Check for profanity
      for (const word of profanityList) {
        if (lowerMessage.includes(word)) {
          messageWarning.textContent = 'Your message contains inappropriate language. Please revise it.';
          messageWarning.className = 'message-warning show';
          return false;
        }
      }

      // Check for bullying patterns
      for (const pattern of bullyingPatterns) {
        if (lowerMessage.includes(pattern)) {
          messageWarning.textContent = 'Your message may contain bullying language. Please be respectful to others.';
          messageWarning.className = 'message-warning show';
          return false;
        }
      }

      // Check for personal information
      for (const pattern of personalInfoPatterns) {
        if (pattern.test(message)) {
          messageWarning.textContent = 'Please do not share personal information like phone numbers, addresses, or social media profiles.';
          messageWarning.className = 'message-warning show';
          return false;
        }
      }

      // Message is clean
      messageWarning.textContent = '';
      messageWarning.className = 'message-warning';
      return true;
    }

    // Add real-time message checking
    messageInput.addEventListener('input', function() {
      checkMessageContent(this.value);
    });

    // Format timestamp for better readability
    function formatTimestamp(timestamp) {
      if (!timestamp) return 'Just now';

      const date = new Date(timestamp);
      const now = new Date();
      const isToday = date.toDateString() === now.toDateString();

      if (isToday) {
        return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      } else {
        return date.toLocaleDateString([], { month: 'short', day: 'numeric' }) +
               ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      }
    }

    // Show loading indicator initially
    loadingIndicator.style.display = 'flex';

    // Reference to messages
    const messagesRef = gun.get('leosinsight-messages');

    // Track sent message IDs to prevent duplicates
    const sentMessageIds = new Set();

    // Function to generate a unique message ID
    function generateMessageId(username, timestamp) {
      return `${username}-${timestamp}-${Math.random().toString(36).substring(2, 10)}`;
    }

    // Function to read file as base64
    function readFileAsBase64(file) {
      return new Promise((resolve, reject) => {
        if (!file) {
          resolve(null);
          return;
        }

        // Check file size (limit to 5MB)
        const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB
        if (file.size > MAX_FILE_SIZE) {
          reject(new Error(`File size exceeds 5MB limit (${(file.size / (1024 * 1024)).toFixed(2)}MB)`));
          return;
        }

        const reader = new FileReader();
        reader.onload = () => resolve({
          data: reader.result,
          type: file.type,
          name: file.name,
          size: file.size
        });
        reader.onerror = () => reject(new Error('Failed to read file'));
        reader.readAsDataURL(file);
      });
    }

    // Handle form submission with optimistic UI updates and file upload
    messageForm.addEventListener('submit', async function(e) {
      e.preventDefault();

      const username = usernameInput.value.trim();
      const message = messageInput.value.trim();
      const fileInput = document.getElementById('file');
      const file = fileInput.files[0];

      if (!username || !message) {
        sendStatus.textContent = 'Please fill in all fields';
        sendStatus.className = 'send-status error';
        return;
      }

      // Check message content for inappropriate content
      if (!checkMessageContent(message)) {
        sendStatus.textContent = 'Please fix the issues with your message before posting';
        sendStatus.className = 'send-status error';
        return;
      }

      // Save username for future use
      localStorage.setItem('username', username);

      // Disable submit button during sending
      submitButton.disabled = true;
      sendStatus.textContent = 'Sending...';

      try {
        // Process file if present
        let fileData = null;
        if (file) {
          try {
            sendStatus.textContent = 'Processing file...';
            fileData = await readFileAsBase64(file);
          } catch (error) {
            sendStatus.textContent = error.message;
            sendStatus.className = 'send-status error';
            submitButton.disabled = false;
            return;
          }
        }

        // Generate a unique message ID
        const timestamp = Date.now();
        const messageId = generateMessageId(username, timestamp);

        // Add to tracking set to prevent duplicates
        sentMessageIds.add(messageId);

        // Create message data
        const messageData = {
          id: messageId,
          username: sanitizeInput(username),
          message: sanitizeInput(message),
          timestamp: timestamp,
          file: fileData
        };

        // Optimistic UI update - show message immediately
        addMessageToUI(messageData, messageId);

        // Send to Gun.js with enhanced retry logic, timeout handling, and connection pooling
        const sendWithRetry = (retries = 3) => {
          // Get a connection from the pool with priority for message sending
          connectionPool.getConnection(true).then(() => {
            // Set a timeout watchdog for ACK
            const ackTimeout = setTimeout(() => {
              sendStatus.textContent = 'Connection timeout. Retrying...';
              sendStatus.className = 'send-status error';
              // Release the connection back to the pool
              connectionPool.releaseConnection();

              if (retries > 0) {
                sendWithRetry(retries - 1);
              } else {
                sendStatus.textContent = 'Failed to send after multiple attempts. Please try again later.';
                submitButton.disabled = false;
              }
            }, 8000); // 8 second timeout for high-load scenarios with file uploads

            try {
              messagesRef.set(messageData, ack => {
                // Clear the timeout since we got a response
                clearTimeout(ackTimeout);
                // Release the connection back to the pool
                connectionPool.releaseConnection();

                if (ack.err && retries > 0) {
                  sendStatus.textContent = `Error: ${ack.err}. Retrying...`;
                  sendStatus.className = 'send-status error';
                  setTimeout(() => sendWithRetry(retries - 1), 1500); // Increased retry delay
                  return;
                }

                if (ack.err) {
                  sendStatus.textContent = `Failed to send: ${ack.err}. Please try again.`;
                  sendStatus.className = 'send-status error';
                } else {
                  sendStatus.textContent = 'Message sent!';
                  sendStatus.className = 'send-status';
                  messageForm.reset();

                  // Restore username from localStorage
                  usernameInput.value = localStorage.getItem('username') || '';

                  // Register message for badge system
                  registerMessageSent();
                }

                submitButton.disabled = false;

                // Clear status after 3 seconds
                setTimeout(() => {
                  sendStatus.textContent = '';
                }, 3000);
              });
            } catch (error) {
              // Handle unexpected errors
              clearTimeout(ackTimeout);
              connectionPool.releaseConnection();
              console.error('Error sending message:', error);
              sendStatus.textContent = 'An unexpected error occurred. Please try again.';
              sendStatus.className = 'send-status error';
              submitButton.disabled = false;
            }
          }).catch(error => {
            // Handle connection pool errors
            console.error('Connection pool error:', error);
            sendStatus.textContent = 'Too many concurrent requests. Please try again in a moment.';
            sendStatus.className = 'send-status error';
            submitButton.disabled = false;
          });
        };

        sendWithRetry();
      } catch (error) {
        console.error('Error in message submission:', error);
        sendStatus.textContent = 'An error occurred. Please try again.';
        sendStatus.className = 'send-status error';
        submitButton.disabled = false;
      }
    });

    // Message batch processing for performance
    const messageBatch = [];
    let batchTimer = null;
    const BATCH_DELAY = 100; // ms

    // Process message batch with DocumentFragment
    function processBatch() {
      if (messageBatch.length === 0) return;

      const fragment = document.createDocumentFragment();

      // Sort by timestamp to ensure correct order
      messageBatch.sort((a, b) => (b.data.timestamp || 0) - (a.data.timestamp || 0));

      messageBatch.forEach(item => {
        const { data, key } = item;

        // Skip if message already exists or is in the sent message tracking set
        if (document.querySelector(`[data-id="${key}"]`)) return;
        if (data.id && sentMessageIds.has(data.id)) return;

        // Add to tracking set if it has an ID
        if (data.id) {
          sentMessageIds.add(data.id);
        }

        const newMessage = document.createElement('div');
        newMessage.className = 'message';
        newMessage.setAttribute('data-id', key);

        // Create message header
        const messageHeader = document.createElement('div');
        messageHeader.className = 'message-header';

        // Create user info
        const messageUser = document.createElement('div');
        messageUser.className = 'message-user';

        const userAvatar = document.createElement('div');
        userAvatar.className = 'user-avatar';
        userAvatar.textContent = data.username.charAt(0).toUpperCase();

        const userName = document.createElement('div');
        userName.className = 'user-name';
        userName.textContent = data.username;

        messageUser.appendChild(userAvatar);
        messageUser.appendChild(userName);

        // Create time element
        const messageTime = document.createElement('div');
        messageTime.className = 'message-time';
        messageTime.textContent = formatTimestamp(data.timestamp);

        // Create message content
        const messageContent = document.createElement('div');
        messageContent.className = 'message-content';
        messageContent.textContent = data.message;

        // Add file attachment if present
        if (data.file && data.file.data) {
          const fileAttachment = document.createElement('div');
          fileAttachment.className = 'message-attachment';

          // Check if it's an image or video
          if (data.file.type.startsWith('image/')) {
            const img = document.createElement('img');
            img.src = data.file.data;
            img.alt = 'Image attachment';
            img.className = 'message-image';
            img.loading = 'lazy';

            // Add click to view full size
            img.addEventListener('click', function() {
              const fullImg = document.createElement('div');
              fullImg.className = 'fullsize-image-overlay';
              fullImg.innerHTML = `
                <div class="fullsize-image-container">
                  <img src="${data.file.data}" alt="Full size image">
                  <button class="close-fullsize">√ó</button>
                </div>
              `;
              document.body.appendChild(fullImg);

              // Close on button click
              fullImg.querySelector('.close-fullsize').addEventListener('click', function() {
                fullImg.remove();
              });

              // Close on background click
              fullImg.addEventListener('click', function(e) {
                if (e.target === fullImg) {
                  fullImg.remove();
                }
              });
            });

            fileAttachment.appendChild(img);
          } else if (data.file.type.startsWith('video/')) {
            const video = document.createElement('video');
            video.src = data.file.data;
            video.controls = true;
            video.className = 'message-video';
            video.preload = 'metadata';
            fileAttachment.appendChild(video);
          } else {
            // For other file types, show a download link
            const fileLink = document.createElement('a');
            fileLink.href = data.file.data;
            fileLink.download = data.file.name || 'download';
            fileLink.className = 'file-download-link';
            fileLink.innerHTML = `<i class="fas fa-download"></i> Download ${data.file.name || 'file'} (${(data.file.size / 1024).toFixed(1)}KB)`;
            fileAttachment.appendChild(fileLink);
          }

          messageContent.appendChild(fileAttachment);
        }

        // Assemble message
        messageHeader.appendChild(messageUser);
        messageHeader.appendChild(messageTime);
        newMessage.appendChild(messageHeader);
        newMessage.appendChild(messageContent);

        fragment.appendChild(newMessage);
      });

      // Prepend all messages at once
      if (fragment.childNodes.length > 0) {
        messagesList.prepend(fragment);
      }

      // Limit number of displayed messages for performance
      const messages = messagesList.querySelectorAll('.message');
      const maxMessages = 50;
      if (messages.length > maxMessages) {
        for (let i = maxMessages; i < messages.length; i++) {
          messages[i].remove();
        }
      }

      // Limit the size of the sentMessageIds set to prevent memory leaks
      if (sentMessageIds.size > 200) {
        // Convert to array, slice to keep only the most recent 100, and convert back to Set
        const idsArray = Array.from(sentMessageIds);
        sentMessageIds.clear();
        idsArray.slice(-100).forEach(id => sentMessageIds.add(id));
      }

      // Clear the batch
      messageBatch.length = 0;
    }

    // Add message to UI (queues for batch processing)
    function addMessageToUI(data, key) {
      // Add to batch
      messageBatch.push({ data, key });

      // Clear existing timer
      if (batchTimer) clearTimeout(batchTimer);

      // Process immediately if it's the first message or after delay
      if (messageBatch.length === 1) {
        batchTimer = setTimeout(processBatch, BATCH_DELAY);
      } else if (messageBatch.length >= 10) {
        // Process immediately if batch is large
        clearTimeout(batchTimer);
        processBatch();
      } else {
        // Reset timer for batch processing
        batchTimer = setTimeout(processBatch, BATCH_DELAY);
      }
    }

    // Throttle function for handling large message sets
    function throttle(func, limit) {
      let inThrottle;
      let lastArgs;
      let lastThis;
      let lastCallTime = 0;

      return function() {
        const now = Date.now();
        const args = arguments;
        const context = this;

        if (!inThrottle) {
          func.apply(context, args);
          lastCallTime = now;
          inThrottle = true;
        } else {
          lastArgs = args;
          lastThis = context;

          const timeSinceLastCall = now - lastCallTime;
          if (timeSinceLastCall >= limit) {
            func.apply(context, lastArgs);
            lastCallTime = now;
            lastArgs = null;
            lastThis = null;
          }
        }
      };
    }

    // Throttled message handler
    const throttledAddMessage = throttle((data, key) => {
      if (data) {
        addMessageToUI(data, key);
      }
    }, 50); // 50ms throttle

    // Store Gun listeners for cleanup
    const gunListeners = [];

    // Listen for new messages with improved error handling, throttling, and pagination for high concurrency
    let messagesLoaded = 0;
    const MAX_INITIAL_MESSAGES = 20; // Limit initial load for better performance

    // Function to load messages with pagination and connection pooling
    function loadMessages() {
      // Get a connection from the pool
      connectionPool.getConnection().then(() => {
        try {
          // Use once() with a limit for pagination
          messagesRef.map().limit(MAX_INITIAL_MESSAGES).once((data, key) => {
            if (data) {
              addMessageToUI(data, key);
              messagesLoaded++;

              // Hide loading indicator after initial messages load
              if (messagesLoaded >= 1) {
                loadingIndicator.style.display = 'none';
              }
            }
            // Release the connection back to the pool
            connectionPool.releaseConnection();
          });
        } catch (error) {
          console.error('Error loading messages:', error);
          connectionPool.releaseConnection();
          loadingIndicator.style.display = 'none';
        }
      }).catch(error => {
        console.error('Connection pool error during message load:', error);
        loadingIndicator.style.display = 'none';
      });
    }

    // Load initial messages
    loadMessages();

    // Set a timeout to hide loading indicator even if no messages are found
    setTimeout(() => {
      loadingIndicator.style.display = 'none';
    }, 3000);

    // Real-time updates for new messages with throttling and connection pooling
    const realtimeListener = messagesRef.map().on((data, key) => {
      // Skip if this message is already in our tracking set
      if (data && data.id && sentMessageIds.has(data.id)) {
        return;
      }

      // Use connection pool for real-time updates
      connectionPool.getConnection().then(() => {
        try {
          // Add to tracking set if it has an ID
          if (data && data.id) {
            sentMessageIds.add(data.id);
          }
          throttledAddMessage(data, key);
        } finally {
          connectionPool.releaseConnection();
        }
      }).catch(() => {
        // If connection pool is full, still try to update UI but with more throttling
        setTimeout(() => {
          // Check again before adding after timeout
          if (data && data.id && !sentMessageIds.has(data.id)) {
            if (data.id) sentMessageIds.add(data.id);
            throttledAddMessage(data, key);
          }
        }, 500);
      });
    });
    gunListeners.push(realtimeListener);

    // Memory-safe cleanup for Gun listeners
    window.addEventListener('beforeunload', () => {
      // Clean up Gun listeners to prevent memory leaks
      gunListeners.forEach(listener => {
        if (listener && typeof listener.off === 'function') {
          listener.off();
        }
      });

      // Clear any pending timers
      if (batchTimer) clearTimeout(batchTimer);
    });

    // Mobile menu toggle
    hamburgerMenu.addEventListener('click', function() {
      this.classList.toggle('active');
      navMenu.classList.toggle('active');
    });

    // Close mobile menu when clicking a link
    document.querySelectorAll('#navMenu a').forEach(link => {
      link.addEventListener('click', () => {
        hamburgerMenu.classList.remove('active');
        navMenu.classList.remove('active');
      });
    });
  </script>

  <!-- Smooth Scrolling Script -->
  <script>
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) { window.scrollTo({ top: target.offsetTop, behavior: 'smooth' }); }
      });
    });

    // Music Player Functionality
    document.addEventListener("DOMContentLoaded", () => {
      const audio = document.getElementById("robloxTheme");
      const toggleButton = document.getElementById("toggleMusic");
      let musicEnabled = false;

      // Function to toggle music
      function toggleMusic() {
        if (audio.paused) {
          audio.play()
            .then(() => {
              toggleButton.classList.add("playing");
              musicEnabled = true;
              localStorage.setItem("musicEnabled", "true");
            })
            .catch(err => {
              console.log("Autoplay blocked:", err);
            });
        } else {
          audio.pause();
          toggleButton.classList.remove("playing");
          musicEnabled = false;
          localStorage.setItem("musicEnabled", "false");
        }
      }

      // Add click event to toggle button
      toggleButton.addEventListener("click", toggleMusic);

      // Enable music on first interaction with the page
      document.body.addEventListener("click", () => {
        // Only auto-play if user hasn't explicitly disabled music
        if (localStorage.getItem("musicEnabled") !== "false" && !musicEnabled) {
          toggleMusic();
        }
      }, { once: true });

      // Check if music was previously enabled
      if (localStorage.getItem("musicEnabled") === "true") {
        // We need to wait for user interaction before playing
        document.body.addEventListener("click", () => {
          if (!musicEnabled) {
            toggleMusic();
          }
        }, { once: true });

        // Show the button as active even before playing
        toggleButton.classList.add("playing");
      }
    });
  </script>

  <!-- Roblox News Agent & Self-Audit Script (Production Ready) -->
  <script>
    // DOM Elements for news toggle
    const staticNewsBtn = document.getElementById('staticNewsBtn');
    const liveNewsBtn = document.getElementById('liveNewsBtn');
    const staticPosts = document.getElementById('staticPosts');
    const livePosts = document.getElementById('livePosts');

    // Toggle between static and live news
    staticNewsBtn.addEventListener('click', function() {
      staticNewsBtn.classList.add('active');
      liveNewsBtn.classList.remove('active');
      staticPosts.style.display = 'grid';
      livePosts.style.display = 'none';
    });

    liveNewsBtn.addEventListener('click', function() {
      liveNewsBtn.classList.add('active');
      staticNewsBtn.classList.remove('active');
      livePosts.style.display = 'grid';
      staticPosts.style.display = 'none';

      // Refresh news content on click (but not on every click)
      if (!liveNewsBtn.dataset.loaded || Date.now() - parseInt(liveNewsBtn.dataset.lastLoaded || 0) > 3600000) {
        rotateBlogPosts();
        liveNewsBtn.dataset.loaded = 'true';
        liveNewsBtn.dataset.lastLoaded = Date.now().toString();
      }
    });

    // ===== BLOG NEWS AGENT =====
    // Preloaded Roblox news content (no API needed)
    const blogPosts = [
      {
        title: "Roblox April Update: Particle FX Boost",
        excerpt: "New rendering enhancements boost VFX performance by 35%. Try them now in Studio!",
        date: "April 10, 2025",
        category: "Update",
        img: "images/fxeffect.png",
        link: "https://blog.roblox.com"
      },
      {
        title: "Top 3 Avatar Customizers You Need",
        excerpt: "Explore these trending avatar plugins gaining popularity among Roblox creators.",
        date: "April 5, 2025",
        category: "Creator Tips",
        img: "images/top3.png",
        link: "https://blog.roblox.com"
      },
      {
        title: "Game Pass Revenue Hits Record High",
        excerpt: "Roblox devs earned over $300M in Q1. Learn how to optimize your Game Pass.",
        date: "April 2, 2025",
        category: "Economy",
        img: "images/breaking_news.png",
        link: "https://blog.roblox.com"
      },
      {
        title: "Roblox Announces Summer Game Event",
        excerpt: "Get ready for the biggest Roblox event of the summer with exclusive items and special game modes.",
        date: "March 28, 2025",
        category: "Event",
        img: "images/fxeffect.png",
        link: "https://blog.roblox.com"
      },
      {
        title: "New Roblox Security Features Released",
        excerpt: "Enhanced account protection and parental controls now available for all users.",
        date: "March 25, 2025",
        category: "Security",
        img: "images/top3.png",
        link: "https://blog.roblox.com"
      },
      {
        title: "Roblox Studio Gets AI-Powered Tools",
        excerpt: "New AI assistant helps developers create scripts and design game mechanics faster.",
        date: "March 20, 2025",
        category: "Development",
        img: "images/breaking_news.png",
        link: "https://blog.roblox.com"
      }
    ];

    // Rotate and refresh blog posts
    function rotateBlogPosts() {
      const container = document.getElementById('livePosts');
      const loadingElement = container.querySelector('.loading-news');

      // Show loading indicator
      if (loadingElement) {
        loadingElement.style.display = 'flex';
      }

      // Simulate network delay for realistic effect (300-800ms)
      setTimeout(() => {
        try {
          // Ensure we have posts with all three specific images
          // First, find posts with each image type
          const top3Post = blogPosts.find(post => post.img === "images/top3.png");
          const breakingNewsPost = blogPosts.find(post => post.img === "images/breaking_news.png");
          const fxEffectPost = blogPosts.find(post => post.img === "images/fxeffect.png");

          // Create an array with exactly one post for each image
          // If any image doesn't have a post, we'll create a default one
          const selectedPosts = [
            top3Post || { ...blogPosts[0], img: "images/top3.png" },
            breakingNewsPost || { ...blogPosts[1], img: "images/breaking_news.png" },
            fxEffectPost || { ...blogPosts[2], img: "images/fxeffect.png" }
          ];

          // Save to Gun.js for persistence
          gun.get('roblox-news').put({
            articles: selectedPosts,
            timestamp: Date.now()
          });

          // Render the posts
          renderBlogPosts(selectedPosts, container, loadingElement);

        } catch (error) {
          console.error('Error rotating blog posts:', error);
          // If error, try to get from Gun.js
          gun.get('roblox-news').once((data) => {
            if (data && data.articles && Array.isArray(data.articles)) {
              renderBlogPosts(data.articles, container, loadingElement);
            } else {
              // Hide loading indicator
              if (loadingElement) {
                loadingElement.style.display = 'none';
              }
            }
          });
        }
      }, Math.floor(Math.random() * 500) + 300); // Random delay between 300-800ms
    }

    // Render blog posts
    function renderBlogPosts(posts, container, loadingElement) {
      // Hide loading indicator
      if (loadingElement) {
        loadingElement.style.display = 'none';
      }

      // Clear existing posts except loading indicator
      Array.from(container.children).forEach(child => {
        if (!child.classList.contains('loading-news')) {
          child.remove();
        }
      });

      // Create document fragment for better performance
      const fragment = document.createDocumentFragment();

      // Create cards for each post
      posts.forEach(post => {
        const card = document.createElement('div');
        card.className = 'blog-card';

        // Create card content
        card.innerHTML = `
          <div class="blog-img">
            <img loading="lazy" src="${post.img}" alt="${post.title}" />
          </div>
          <div class="blog-content">
            <div class="blog-meta">
              <span class="blog-date">${post.date}</span>
              <span class="blog-category">${post.category}</span>
            </div>
            <h3 class="blog-title">${post.title}</h3>
            <p class="blog-excerpt">${post.excerpt}</p>
            <a href="${post.link}" target="_blank" class="read-more">Read More ‚Üí</a>
          </div>
        `;

        // Add click handler to open link
        card.addEventListener('click', () => {
          window.open(post.link, '_blank');
        });

        // Prevent link click from triggering card click
        const readMoreLink = card.querySelector('.read-more');
        if (readMoreLink) {
          readMoreLink.addEventListener('click', (e) => {
            e.stopPropagation();
          });
        }

        // Add to fragment
        fragment.appendChild(card);
      });

      // Add all cards to container at once
      container.appendChild(fragment);
    }

    // ===== SELF-AUDIT FUNCTIONALITY =====
    // Audit checklist for app health
    const auditChecklist = [
      "All navigation links should scroll to matching sections",
      "All buttons must respond visually on hover and click",
      "All forms must validate and prevent empty submissions",
      "Messages must be sanitized, stored, and render with timestamps",
      "All dynamic sections (blog, chat) should initialize correctly on load",
      "Gun.js connection must show status",
      "Mobile view must not overflow or clip important content",
      "News section must display at least 3 headlines with metadata"
    ];

    // Self-audit function (can be triggered from console)
    window.runSelfAudit = function() {
      console.log("%cüß† Leo's Insight Self-Audit Starting‚Ä¶", "color: #ff6600; font-weight: bold; font-size: 14px;");

      let allPassed = true;

      // Check navigation links
      const navLinks = document.querySelectorAll('nav a[href^="#"]');
      const navSections = Array.from(navLinks).map(link => document.querySelector(link.getAttribute('href')));
      const navCheck = navLinks.length > 0 && navSections.every(section => section !== null);
      console.log(`%c${navCheck ? '‚úÖ' : '‚ùå'} Navigation links: ${navLinks.length} links, ${navSections.filter(s => s !== null).length} valid targets`,
        `color: ${navCheck ? 'green' : 'red'}; font-weight: bold;`);
      if (!navCheck) allPassed = false;

      // Check Gun.js connection
      const gunCheck = typeof gun !== 'undefined' && gun._.opt.peers && Object.keys(gun._.opt.peers).length > 0;
      console.log(`%c${gunCheck ? '‚úÖ' : '‚ùå'} Gun.js connection: ${gunCheck ? 'Connected to ' + Object.keys(gun._.opt.peers).length + ' peers' : 'Not connected'}`,
        `color: ${gunCheck ? 'green' : 'red'}; font-weight: bold;`);
      if (!gunCheck) allPassed = false;

      // Check message board
      const messagesList = document.getElementById('messagesList');
      const messageForm = document.getElementById('messageForm');
      const messageCheck = messagesList && messageForm;
      console.log(`%c${messageCheck ? '‚úÖ' : '‚ùå'} Message board: ${messageCheck ? 'Properly initialized' : 'Missing components'}`,
        `color: ${messageCheck ? 'green' : 'red'}; font-weight: bold;`);
      if (!messageCheck) allPassed = false;

      // Check blog posts
      const blogPostsCheck = document.querySelectorAll('.blog-card').length >= 3;
      console.log(`%c${blogPostsCheck ? '‚úÖ' : '‚ùå'} Blog posts: ${document.querySelectorAll('.blog-card').length} cards found`,
        `color: ${blogPostsCheck ? 'green' : 'red'}; font-weight: bold;`);
      if (!blogPostsCheck) allPassed = false;

      // Check mobile responsiveness
      const viewportMeta = document.querySelector('meta[name="viewport"]');
      const responsiveCheck = viewportMeta && viewportMeta.content.includes('width=device-width');
      console.log(`%c${responsiveCheck ? '‚úÖ' : '‚ùå'} Mobile viewport: ${responsiveCheck ? 'Properly configured' : 'Missing or misconfigured'}`,
        `color: ${responsiveCheck ? 'green' : 'red'}; font-weight: bold;`);
      if (!responsiveCheck) allPassed = false;

      // Final result
      console.log(`%c${allPassed ? '‚úÖ ALL CHECKS PASSED' : '‚ùå SOME CHECKS FAILED'} - See details above`,
        `color: ${allPassed ? 'green' : 'red'}; font-weight: bold; font-size: 14px;`);

      return allPassed;
    };

    // Function to ensure blog images are properly sized and displayed
    function initBlogImageStyles() {
      // Add event listeners to ensure images are properly loaded
      const blogImages = document.querySelectorAll('.blog-img img');

      blogImages.forEach(img => {
        // When image loads, adjust container height if needed
        img.addEventListener('load', function() {
          // Make sure the image is visible at its natural aspect ratio
          this.style.height = 'auto';
          this.style.maxHeight = 'none';

          // If image is too tall, add a max-height
          if (this.height > 400) {
            this.style.maxHeight = '400px';
            this.style.objectFit = 'cover';
            this.style.objectPosition = 'center top';
          }
        });

        // Force reload of image to trigger load event
        if (img.complete) {
          const src = img.src;
          img.src = '';
          img.src = src;
        }
      });
    }

    // Run self-audit on load (silent mode)
    document.addEventListener('DOMContentLoaded', async function() {
      try {
        // Initialize badge system first (async)
        await initBadgeSystem();

        // Initialize blog image styles
        initBlogImageStyles();

        // Wait for everything to initialize
        setTimeout(() => {
          try {
            const auditResult = window.runSelfAudit();
            console.log(`%cüß† Leo's Insight is ${auditResult ? 'healthy' : 'needs attention'}`,
              `color: ${auditResult ? '#4ee44e' : '#ff4500'}; font-weight: bold;`);
          } catch (error) {
            console.error('Error running self-audit:', error);
          }
        }, 2000);
      } catch (error) {
        console.error('Error during initialization:', error);
      }
    });

    // ===== BADGE SYSTEM FUNCTIONALITY =====
    // Badge definitions with async support
    const badges = [
      {
        id: "newcomer",
        title: "Newcomer",
        desc: "Awarded for joining",
        icon: "‚≠ê",
        check: async () => true // Always awarded
      },
      {
        id: "active",
        title: "Active Member",
        desc: "Awarded for activity",
        icon: "üõ°Ô∏è",
        check: async () => await getVisitCount() >= 5
      },
      {
        id: "chatterbox",
        title: "Chatterbox",
        desc: "Awarded for messaging",
        icon: "üí¨",
        check: async () => await getMessagesSent() >= 3
      },
      {
        id: "topcontributor",
        title: "Top Contributor",
        desc: "Awarded for contribution",
        icon: "ü•á",
        check: async () => (await getVisitCount()) + (await getMessagesSent()) >= 10
      },
      {
        id: "scriptnovice",
        title: "Script Novice",
        desc: "Created your first Lua script",
        icon: "üìù",
        check: async () => {
          try {
            const db = await dbPromise;
            if (db) {
              return new Promise(resolve => {
                const tx = db.transaction('userData', 'readonly');
                const store = tx.objectStore('userData');
                const request = store.get('scriptSubmitted');

                request.onsuccess = event => {
                  const data = event.target.result;
                  resolve(data ? data.value === true : false);
                };

                request.onerror = () => {
                  resolve(localStorage.getItem("scriptSubmitted") === "true");
                };
              });
            }
          } catch (error) {
            console.error('Error checking script submitted:', error);
          }
          return localStorage.getItem("scriptSubmitted") === "true";
        }
      },
      {
        id: "scriptmaster",
        title: "Script Master",
        desc: "Created 3+ Lua scripts",
        icon: "üß†",
        check: async () => {
          try {
            const db = await dbPromise;
            if (db) {
              return new Promise(resolve => {
                const tx = db.transaction('userData', 'readonly');
                const store = tx.objectStore('userData');
                const request = store.get('scriptsSubmitted');

                request.onsuccess = event => {
                  const data = event.target.result;
                  resolve(data ? data.count >= 3 : false);
                };

                request.onerror = () => {
                  resolve(parseInt(localStorage.getItem("scriptsSubmitted") || 0) >= 3);
                };
              });
            }
          } catch (error) {
            console.error('Error checking scripts submitted:', error);
          }
          return parseInt(localStorage.getItem("scriptsSubmitted") || 0) >= 3;
        }
      },
      {
        id: "codeexporter",
        title: "Code Exporter",
        desc: "Exported a Lua script",
        icon: "üíæ",
        check: async () => {
          try {
            const db = await dbPromise;
            if (db) {
              return new Promise(resolve => {
                const tx = db.transaction('userData', 'readonly');
                const store = tx.objectStore('userData');
                const request = store.get('scriptExported');

                request.onsuccess = event => {
                  const data = event.target.result;
                  resolve(data ? data.value === true : false);
                };

                request.onerror = () => {
                  resolve(localStorage.getItem("scriptExported") === "true");
                };
              });
            }
          } catch (error) {
            console.error('Error checking script exported:', error);
          }
          return localStorage.getItem("scriptExported") === "true";
        }
      }
    ];

    // IndexedDB for persistent storage
    const dbPromise = (() => {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open('LeosInsightDB', 1);

        request.onerror = event => {
          console.error('IndexedDB error:', event.target.error);
          reject(event.target.error);
          // Fall back to localStorage if IndexedDB fails
          resolve(null);
        };

        request.onupgradeneeded = event => {
          const db = event.target.result;

          // Create stores for user data
          if (!db.objectStoreNames.contains('userData')) {
            const userStore = db.createObjectStore('userData', { keyPath: 'id' });
            userStore.createIndex('id', 'id', { unique: true });
          }

          // Create store for messages
          if (!db.objectStoreNames.contains('messages')) {
            const messageStore = db.createObjectStore('messages', { keyPath: 'id', autoIncrement: true });
            messageStore.createIndex('timestamp', 'timestamp', { unique: false });
          }
        };

        request.onsuccess = event => {
          const db = event.target.result;
          resolve(db);
        };
      }).catch(error => {
        console.error('Error setting up IndexedDB:', error);
        return null; // Return null to indicate fallback to localStorage
      });
    })();

    // Helper functions for badge system with IndexedDB support
    async function getVisitCount() {
      try {
        const db = await dbPromise;
        if (db) {
          return new Promise(resolve => {
            const tx = db.transaction('userData', 'readonly');
            const store = tx.objectStore('userData');
            const request = store.get('visitCount');

            request.onsuccess = event => {
              const data = event.target.result;
              resolve(data ? data.count : 0);
            };

            request.onerror = () => {
              resolve(parseInt(localStorage.getItem('visitCount') || '0'));
            };
          });
        }
      } catch (error) {
        console.error('Error getting visit count:', error);
      }

      // Fallback to localStorage
      return parseInt(localStorage.getItem('visitCount') || '0');
    }

    async function getMessagesSent() {
      try {
        const db = await dbPromise;
        if (db) {
          return new Promise(resolve => {
            const tx = db.transaction('userData', 'readonly');
            const store = tx.objectStore('userData');
            const request = store.get('messagesSent');

            request.onsuccess = event => {
              const data = event.target.result;
              resolve(data ? data.count : 0);
            };

            request.onerror = () => {
              resolve(parseInt(localStorage.getItem('messagesSent') || '0'));
            };
          });
        }
      } catch (error) {
        console.error('Error getting messages sent:', error);
      }

      // Fallback to localStorage
      return parseInt(localStorage.getItem('messagesSent') || '0');
    }

    async function updateVisitCount() {
      try {
        const db = await dbPromise;
        if (db) {
          const tx = db.transaction('userData', 'readwrite');
          const store = tx.objectStore('userData');

          // Get current count
          const request = store.get('visitCount');

          request.onsuccess = event => {
            const data = event.target.result || { id: 'visitCount', count: 0 };
            data.count++;
            store.put(data);
          };

          await new Promise(resolve => {
            tx.oncomplete = resolve;
            tx.onerror = resolve; // Still resolve to continue execution
          });
        } else {
          // Fallback to localStorage
          let visitCount = parseInt(localStorage.getItem('visitCount') || '0');
          visitCount++;
          localStorage.setItem('visitCount', visitCount.toString());
        }
      } catch (error) {
        console.error('Error updating visit count:', error);
        // Fallback to localStorage
        let visitCount = parseInt(localStorage.getItem('visitCount') || '0');
        visitCount++;
        localStorage.setItem('visitCount', visitCount.toString());
      }
    }

    async function registerMessageSent() {
      try {
        const db = await dbPromise;
        if (db) {
          const tx = db.transaction('userData', 'readwrite');
          const store = tx.objectStore('userData');

          // Get current count
          const request = store.get('messagesSent');

          request.onsuccess = event => {
            const data = event.target.result || { id: 'messagesSent', count: 0 };
            data.count++;
            store.put(data);
          };

          await new Promise(resolve => {
            tx.oncomplete = resolve;
            tx.onerror = resolve; // Still resolve to continue execution
          });
        } else {
          // Fallback to localStorage
          let messagesSent = parseInt(localStorage.getItem('messagesSent') || '0');
          messagesSent++;
          localStorage.setItem('messagesSent', messagesSent.toString());
        }
      } catch (error) {
        console.error('Error registering message sent:', error);
        // Fallback to localStorage
        let messagesSent = parseInt(localStorage.getItem('messagesSent') || '0');
        messagesSent++;
        localStorage.setItem('messagesSent', messagesSent.toString());
      }
    }

    // Copy code function for character cards
    function copyCode(button) {
      const codeBlock = button.nextElementSibling;
      const codeText = codeBlock.textContent;

      // Create a temporary textarea element to copy from
      const textarea = document.createElement('textarea');
      textarea.value = codeText;
      textarea.style.position = 'fixed';  // Prevent scrolling to the element
      document.body.appendChild(textarea);
      textarea.select();

      try {
        // Execute copy command
        const successful = document.execCommand('copy');

        // Visual feedback
        if (successful) {
          button.innerHTML = '<i class="fas fa-check"></i> Copied!';
          button.classList.add('copied');

          // Mark as exported for badge
          localStorage.setItem('scriptExported', 'true');

          // Update badges
          displayBadges();
          updateUserHeader();

          // Reset button after 2 seconds
          setTimeout(() => {
            button.innerHTML = '<i class="fas fa-copy"></i> Copy';
            button.classList.remove('copied');
          }, 2000);
        }
      } catch (err) {
        console.error('Failed to copy text: ', err);
      }

      // Clean up
      document.body.removeChild(textarea);
    }

    // Initialize badge system (async support)
    async function initBadgeSystem() {
      try {
        // Update visit count
        await updateVisitCount();

        // Display badges
        await displayBadges();

        // Display user info in header if available
        await updateUserHeader();

        // Hook into message form submission
        if (messageForm) {
          const originalSubmitHandler = messageForm.onsubmit;
          messageForm.addEventListener("submit", async function(e) {
            try {
              // Register message sent
              await registerMessageSent();

              // Update badges display
              await displayBadges();
              await updateUserHeader();
            } catch (error) {
              console.error('Error updating badges after message:', error);
            }
          });
        }
      } catch (error) {
        console.error('Error initializing badge system:', error);
      }

      // Setup signup modal
      setupSignupModal();

      // Update message display to show badges
      updateMessageBadges();

      // Setup narrator
      setupNarrator();

      // Initialize Roblox News Feed
      initRobloxNewsFeed();

      // Initialize Roblox Game Player
      initRobloxGamePlayer();

      // Initialize video modal functionality
      initVideoModal();

      // Initialize script editor functionality
      initScriptEditor();

      // Initialize live game feeds
      initLiveGameFeeds();
    }

    // Initialize live game feeds in the footer
    function initLiveGameFeeds() {
      const popularGamesFeed = document.getElementById('popularGamesFeed');
      const upcomingGamesFeed = document.getElementById('upcomingGamesFeed');

      if (!popularGamesFeed || !upcomingGamesFeed) return;

      // Fetch popular games data
      fetchPopularGames();

      // Fetch upcoming games data
      fetchUpcomingGames();

      // Refresh feeds every 5 minutes
      setInterval(() => {
        fetchPopularGames();
        fetchUpcomingGames();
      }, 5 * 60 * 1000);

      // Function to fetch popular games
      function fetchPopularGames() {
        // In a real implementation, this would be an API call to Roblox
        // For this demo, we'll use mock data
        const popularGames = [
          { id: 920587237, title: "Adopt Me!", players: 350000 },
          { id: 2753915549, title: "Blox Fruits", players: 280000 },
          { id: 4490140733, title: "My Restaurant", players: 175000 },
          { id: 6516141723, title: "DOORS", players: 120000 },
          { id: 6872265039, title: "BedWars", players: 95000 }
        ];

        // Update the feed
        updateGameFeed(popularGamesFeed, popularGames);
      }

      // Function to fetch upcoming games
      function fetchUpcomingGames() {
        // In a real implementation, this would be an API call to Roblox
        // For this demo, we'll use mock data
        const upcomingGames = [
          { id: 9999001, title: "Cosmic Explorers", releaseDate: "May 15, 2025" },
          { id: 9999002, title: "Mech Warriors: Ultimate", releaseDate: "June 1, 2025" },
          { id: 9999003, title: "Treasure Island X", releaseDate: "June 20, 2025" },
          { id: 9999004, title: "Zombie Apocalypse 2", releaseDate: "July 4, 2025" },
          { id: 9999005, title: "Dragon Riders", releaseDate: "July 15, 2025" }
        ];

        // Update the feed
        updateUpcomingGameFeed(upcomingGamesFeed, upcomingGames);
      }

      // Function to update game feed with data
      function updateGameFeed(feedElement, games) {
        // Clear loading message
        feedElement.innerHTML = '';

        // Add games to feed
        games.forEach(game => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = `https://www.roblox.com/games/${game.id}`;
          a.target = '_blank';
          a.rel = 'noopener noreferrer';

          const titleSpan = document.createElement('span');
          titleSpan.className = 'game-title';
          titleSpan.textContent = game.title;

          const playersSpan = document.createElement('span');
          playersSpan.className = 'game-players';
          playersSpan.textContent = formatNumber(game.players) + ' players';

          a.appendChild(titleSpan);
          a.appendChild(playersSpan);
          li.appendChild(a);
          feedElement.appendChild(li);
        });
      }

      // Function to update upcoming game feed with data
      function updateUpcomingGameFeed(feedElement, games) {
        // Clear loading message
        feedElement.innerHTML = '';

        // Add games to feed
        games.forEach(game => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = '#';
          a.onclick = (e) => {
            e.preventDefault();
            alert(`${game.title} will be released on ${game.releaseDate}. Stay tuned!`);
          };

          const titleSpan = document.createElement('span');
          titleSpan.className = 'game-title';
          titleSpan.textContent = game.title;

          const dateSpan = document.createElement('span');
          dateSpan.className = 'game-players';
          dateSpan.textContent = game.releaseDate;

          a.appendChild(titleSpan);
          a.appendChild(dateSpan);
          li.appendChild(a);
          feedElement.appendChild(li);
        });
      }

      // Helper function to format numbers with commas
      function formatNumber(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }
    }

    // Initialize Roblox Script Editor
    function initScriptEditor() {
      const saveScriptBtn = document.getElementById('saveScriptBtn');
      const loadScriptBtn = document.getElementById('loadScriptBtn');
      const downloadScriptBtn = document.getElementById('downloadScriptBtn');
      const submitScriptBtn = document.getElementById('submitScriptBtn');
      const luaEditor = document.getElementById('luaEditor');
      const editorStatus = document.getElementById('editorStatus');
      const editorTabs = document.querySelectorAll('.editor-tab');

      if (!saveScriptBtn || !loadScriptBtn || !downloadScriptBtn || !submitScriptBtn || !luaEditor || !editorStatus) return;

      // Save script to localStorage
      saveScriptBtn.addEventListener('click', function() {
        const code = luaEditor.value;
        localStorage.setItem('leoLuaCode', code);
        editorStatus.textContent = '‚úÖ Script saved locally!';

        // Clear status message after 3 seconds
        setTimeout(() => {
          editorStatus.textContent = '';
        }, 3000);
      });

      // Load script from localStorage
      loadScriptBtn.addEventListener('click', function() {
        const code = localStorage.getItem('leoLuaCode');
        if (code) {
          luaEditor.value = code;
          editorStatus.textContent = '‚úÖ Loaded saved script!';
        } else {
          editorStatus.textContent = '‚ö†Ô∏è No saved script found.';
        }

        // Clear status message after 3 seconds
        setTimeout(() => {
          editorStatus.textContent = '';
        }, 3000);
      });

      // Download script as .lua file
      downloadScriptBtn.addEventListener('click', function() {
        const code = luaEditor.value;
        const blob = new Blob([code], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'leos_script.lua';
        link.click();

        // Mark script as exported for badge
        localStorage.setItem('scriptExported', 'true');

        editorStatus.textContent = '‚úÖ Script downloaded as leos_script.lua';

        // Update badges display
        displayBadges();
        updateUserHeader();

        // Clear status message after 3 seconds
        setTimeout(() => {
          editorStatus.textContent = '';
        }, 3000);
      });

      // Submit script and earn badge
      submitScriptBtn.addEventListener('click', function() {
        const code = luaEditor.value;
        if (code.length < 10) {
          editorStatus.textContent = '‚ö†Ô∏è Please write more code before submitting!';
          return;
        }

        // Mark as submitted for Script Novice badge
        localStorage.setItem('scriptSubmitted', 'true');

        // Track number of scripts submitted for Script Master badge
        const scriptsSubmitted = parseInt(localStorage.getItem('scriptsSubmitted') || 0);
        localStorage.setItem('scriptsSubmitted', scriptsSubmitted + 1);

        // Check if this is the first script (for badge notification)
        if (scriptsSubmitted === 0) {
          editorStatus.textContent = 'üèÜ Congratulations! You earned the "Script Novice" badge!';
        } else if (scriptsSubmitted === 2) { // This will be the 3rd submission (0->1->2->3)
          editorStatus.textContent = 'üèÜ Congratulations! You earned the "Script Master" badge!';
        } else {
          editorStatus.textContent = '‚úÖ Script submitted successfully! (' + (scriptsSubmitted + 1) + ' scripts submitted)';
        }

        // Update badges display
        displayBadges();
        updateUserHeader();

        // Optional: Send script to admin via EmailJS
        if (window.emailjs) {
          const templateParams = {
            username: localStorage.getItem('username') || 'Anonymous User',
            userEmail: localStorage.getItem('userEmail') || 'No Email',
            scriptContent: code
          };

          emailjs.send('service_id', 'template_id', templateParams)
            .then(function(response) {
              console.log('Script sent to admin:', response.status);
            }, function(error) {
              console.error('Failed to send script:', error);
            });
        }
      });

      // Tab switching functionality (visual only)
      editorTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          editorTabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
        });
      });
    }

    // Create a news article modal for embedded content
    function createNewsModal() {
      // Create modal elements if they don't exist
      if (!document.getElementById('newsArticleModal')) {
        const modal = document.createElement('div');
        modal.id = 'newsArticleModal';
        modal.className = 'news-article-modal';
        modal.innerHTML = `
          <div class="news-article-content">
            <span class="close-news-modal">&times;</span>
            <div class="news-article-header">
              <h2 id="newsArticleTitle"></h2>
              <div class="news-article-meta">
                <span id="newsArticleDate"></span>
                <span id="newsArticleCategory"></span>
              </div>
            </div>
            <div class="news-article-body" id="newsArticleBody"></div>
          </div>
        `;
        document.body.appendChild(modal);

        // Add event listener to close button
        const closeBtn = modal.querySelector('.close-news-modal');
        closeBtn.addEventListener('click', function() {
          modal.style.display = 'none';
        });

        // Close modal when clicking outside the content
        modal.addEventListener('click', function(event) {
          if (event.target === modal) {
            modal.style.display = 'none';
          }
        });

        // Add styles for the modal
        const style = document.createElement('style');
        style.textContent = `
          .news-article-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
          }

          .news-article-content {
            background: rgba(20, 20, 20, 0.95);
            margin: 5% auto;
            padding: 30px;
            width: 90%;
            max-width: 900px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(255, 102, 0, 0.3);
            border: 2px solid #ff6600;
            position: relative;
            max-height: 85vh;
            overflow-y: auto;
          }

          .close-news-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            transition: color 0.3s;
          }

          .close-news-modal:hover {
            color: #ff6600;
          }

          .news-article-header {
            margin-bottom: 25px;
            border-bottom: 1px solid rgba(255, 102, 0, 0.3);
            padding-bottom: 15px;
          }

          .news-article-header h2 {
            color: #ff6600;
            font-size: 2rem;
            margin-bottom: 10px;
          }

          .news-article-meta {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            color: #aaa;
          }

          .news-article-meta span:last-child {
            background: #ff6600;
            color: white;
            padding: 2px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.8rem;
          }

          .news-article-body {
            color: #ddd;
            line-height: 1.6;
            font-size: 1.1rem;
          }

          .news-article-body p {
            margin-bottom: 15px;
          }

          .news-article-body img {
            max-width: 100%;
            border-radius: 10px;
            margin: 20px 0;
          }
        `;
        document.head.appendChild(style);
      }
    }

    // Roblox News Feed
    function initRobloxNewsFeed() {
      const robloxNewsFeed = document.getElementById('robloxNewsFeed');
      const fallbackNewsContent = document.getElementById('fallbackNewsContent');
      const refreshButton = document.getElementById('refreshNewsFeed');
      const loadingIndicator = document.getElementById('newsLoadingIndicator');

      if (!robloxNewsFeed || !refreshButton) return;

      // Create the news modal
      createNewsModal();

      // Sample news data with fixed thumbnails and full article content
      const robloxNews = [
        {
          title: "Roblox April Update: Particle FX Boost",
          excerpt: "New rendering enhancements boost VFX performance by 35%. Try them now in Studio!",
          date: "April 10, 2025",
          category: "Update",
          image: "images/fxeffect.png",
          content: `
            <p>Roblox has released a major update to its particle effects system, bringing a significant performance boost to visual effects across the platform. The new Particle FX system delivers up to 35% better performance while maintaining the same visual quality.</p>

            <p>The update includes:</p>
            <ul>
              <li>Optimized particle rendering pipeline</li>
              <li>Improved memory management for particle systems</li>
              <li>New particle effect templates in Studio</li>
              <li>Enhanced particle collision detection</li>
            </ul>

            <p>Developers can access these improvements immediately by updating to the latest version of Roblox Studio. The new particle system is backward compatible with existing effects, so no changes to current games are required.</p>

            <p>"This update represents our ongoing commitment to providing developers with the best tools possible," said a Roblox spokesperson. "The performance gains will be especially noticeable in games with heavy visual effects."</p>

            <p>Early testing shows that games with extensive particle usage, such as those featuring magic spells, explosions, or environmental effects like rain and snow, will see the most significant improvements.</p>
          `
        },
        {
          title: "Top 3 Avatar Customizers You Need",
          excerpt: "Explore these trending avatar plugins gaining popularity among Roblox creators.",
          date: "April 5, 2025",
          category: "Creator Tips",
          image: "images/top3.png",
          content: `
            <p>Avatar customization continues to be one of the most popular aspects of the Roblox platform. With the growing demand for unique and personalized avatars, several new tools have emerged to help creators design standout characters.</p>

            <h3>1. Advanced Avatar Studio</h3>
            <p>This comprehensive tool offers unprecedented control over avatar design, including:</p>
            <ul>
              <li>Layered clothing support with physics simulation</li>
              <li>Advanced facial expression editor</li>
              <li>Custom animation sequence creator</li>
              <li>One-click export to Roblox Marketplace</li>
            </ul>

            <h3>2. Accessory Wizard</h3>
            <p>Perfect for creators focusing on avatar accessories:</p>
            <ul>
              <li>Hundreds of pre-made templates to customize</li>
              <li>Material and texture library with over 500 options</li>
              <li>Compatibility checker for all avatar types</li>
              <li>Built-in pricing optimizer for Marketplace listings</li>
            </ul>

            <h3>3. Animation Pro</h3>
            <p>For those who want their avatars to move in unique ways:</p>
            <ul>
              <li>Motion capture integration</li>
              <li>Animation blending and sequencing</li>
              <li>Custom emote creator</li>
              <li>Animation marketplace integration</li>
            </ul>

            <p>All three tools are available in the Creator Marketplace, with free trial versions for new users.</p>
          `
        },
        {
          title: "Game Pass Revenue Hits Record High",
          excerpt: "Roblox devs earned over $300M in Q1. Learn how to optimize your Game Pass.",
          date: "April 2, 2025",
          category: "Economy",
          image: "images/breaking_news.png",
          content: `
            <p>Roblox developers have reached a new milestone in the first quarter of 2025, collectively earning over $300 million from Game Pass sales alone. This represents a 25% increase compared to the same period last year.</p>

            <p>The surge in revenue is attributed to several factors:</p>
            <ul>
              <li>Increased player spending across the platform</li>
              <li>More sophisticated Game Pass offerings from developers</li>
              <li>Improved discovery features for Game Passes</li>
              <li>Strategic pricing and bundling by top developers</li>
            </ul>

            <h3>Optimization Tips for Developers</h3>
            <p>To maximize your Game Pass revenue, consider these strategies used by top-earning developers:</p>

            <ol>
              <li><strong>Tiered Pricing:</strong> Offer multiple Game Pass options at different price points</li>
              <li><strong>Bundle Value:</strong> Create bundles that offer better value than individual purchases</li>
              <li><strong>Limited-Time Offers:</strong> Use time-limited discounts to drive purchases</li>
              <li><strong>Clear Value Proposition:</strong> Clearly communicate the benefits of each Game Pass</li>
              <li><strong>Progressive Unlocks:</strong> Design Game Passes that unlock additional content as players progress</li>
            </ol>

            <p>Roblox has also announced plans to introduce new Game Pass features later this year, including subscription options and progressive unlocks.</p>
          `
        },
        {
          title: "New Developer Exchange Rates Announced",
          excerpt: "Roblox increases DevEx rates by 15% starting May 1st, 2025.",
          date: "March 28, 2025",
          category: "Economy",
          image: "images/fxeffect.png",
          content: `
            <p>In a move that has excited the developer community, Roblox has announced a 15% increase in Developer Exchange (DevEx) rates, effective May 1st, 2025. This change will allow developers to convert their Robux to real-world currency at more favorable rates.</p>

            <p>The new exchange rates will be:</p>
            <ul>
              <li>100,000 Robux = $350 USD (previously $305)</li>
              <li>500,000 Robux = $1,750 USD (previously $1,525)</li>
              <li>1,000,000 Robux = $3,500 USD (previously $3,050)</li>
            </ul>

            <p>"This rate increase reflects our commitment to supporting the developer community," said Roblox's Chief Economy Officer. "As the platform continues to grow, we want to ensure that developers share in that success."</p>

            <p>The announcement comes as Roblox reports record engagement numbers, with daily active users exceeding 300 million in March 2025.</p>

            <p>Developers have responded positively to the news, with many planning to reinvest the additional income into their development teams and game improvements.</p>

            <p>The minimum threshold for DevEx remains at 100,000 Robux, and all other eligibility requirements remain unchanged.</p>
          `
        },
        {
          title: "Roblox Studio AI Assistant Now Available",
          excerpt: "Generate scripts, models, and terrain with the new AI Assistant tool in Studio.",
          date: "March 25, 2025",
          category: "Development",
          image: "images/top3.png",
          content: `
            <p>Roblox has officially launched its AI Assistant tool for Roblox Studio, bringing powerful artificial intelligence capabilities to all developers. The tool, which has been in beta testing with select developers since January, is now available to everyone.</p>

            <p>The AI Assistant integrates directly into Roblox Studio and offers several key features:</p>

            <h3>Script Generation</h3>
            <p>Developers can describe functionality in natural language, and the AI will generate Luau code to implement it. The system understands Roblox-specific concepts and best practices, producing optimized code that follows platform guidelines.</p>

            <h3>3D Model Creation</h3>
            <p>The AI can generate 3D models based on text descriptions. While not replacing professional modeling, this feature allows for rapid prototyping and creation of background elements.</p>

            <h3>Terrain Generation</h3>
            <p>Developers can describe landscapes in natural language, and the AI will generate corresponding terrain. Options include various biomes, geological features, and even entire islands or continents.</p>

            <h3>Code Explanation and Optimization</h3>
            <p>The AI can analyze existing scripts, explain how they work, and suggest optimizations to improve performance or readability.</p>

            <p>"This tool represents a significant step forward in making development more accessible," said the Roblox Studio product manager. "We're especially excited to see how it helps newcomers overcome the initial learning curve of game development."</p>

            <p>The AI Assistant is available now through the Plugins menu in Roblox Studio.</p>
          `
        },
        {
          title: "Voice Chat Coming to All 13+ Users",
          excerpt: "Spatial voice chat expanding to all eligible users in April update.",
          date: "March 20, 2025",
          category: "Social",
          image: "images/breaking_news.png",
          content: `
            <p>Roblox has announced that its spatial voice chat feature will be available to all users aged 13 and older starting with the April platform update. Previously limited to users 16 and older, this expansion will significantly increase the number of players with access to voice communication.</p>

            <p>The spatial voice chat system allows players to talk to others in-game, with voice volume and clarity changing based on proximity within the game world. This creates a more immersive experience where conversations naturally fade as players move away from each other.</p>

            <h3>Enhanced Safety Features</h3>
            <p>With the expansion to younger users, Roblox has implemented additional safety features:</p>
            <ul>
              <li>Advanced voice moderation using AI to detect inappropriate content</li>
              <li>Simplified parental controls to enable/disable voice chat</li>
              <li>Game-by-game permission settings</li>
              <li>One-click mute options for individual players</li>
              <li>Voice chat free zones within games</li>
            </ul>

            <h3>Developer Implementation</h3>
            <p>Game developers will need to explicitly enable voice chat in their experiences. The updated Voice Chat API includes new features for developers:</p>
            <ul>
              <li>Custom voice zones with different rules</li>
              <li>Team-based voice channels</li>
              <li>Voice effects and filters</li>
              <li>Voice activity visualization options</li>
            </ul>

            <p>"Voice chat has been one of our most requested features," said Roblox's Head of Social Features. "We've taken the time to ensure we can offer this capability to more users while maintaining our commitment to safety."</p>

            <p>The feature will roll out gradually throughout April, with all eligible users gaining access by the end of the month.</p>
          `
        }
      ];

      // Add CSS for news items
      const newsStyles = document.createElement('style');
      newsStyles.textContent = `
        .news-item {
          display: flex;
          flex-direction: column;
          background: rgba(20, 20, 20, 0.8);
          border-radius: 15px;
          overflow: hidden;
          margin-bottom: 20px;
          box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
          border: 2px solid #333;
          transition: all 0.3s ease;
        }

        .news-item:hover {
          transform: translateY(-5px);
          box-shadow: 0 15px 30px rgba(255, 102, 0, 0.2);
          border-color: #ff6600;
        }

        .news-item-img {
          height: 180px;
          overflow: hidden;
        }

        .news-item-img img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          transition: transform 0.5s ease;
        }

        .news-item:hover .news-item-img img {
          transform: scale(1.05);
        }

        .news-item-content {
          padding: 20px;
        }

        .news-item-meta {
          display: flex;
          justify-content: space-between;
          margin-bottom: 10px;
          font-size: 0.9rem;
        }

        .news-item-date {
          color: #aaa;
        }

        .news-item-category {
          background: #ff6600;
          color: white;
          padding: 2px 10px;
          border-radius: 20px;
          font-weight: bold;
          font-size: 0.8rem;
        }

        .news-item-title {
          font-size: 1.3rem;
          margin-bottom: 10px;
          color: #ff6600;
        }

        .news-item-excerpt {
          color: #ccc;
          margin-bottom: 15px;
          font-size: 0.95rem;
          line-height: 1.5;
        }

        .news-item-link {
          display: inline-block;
          color: #00c8ff;
          font-weight: bold;
          text-decoration: none;
          transition: all 0.3s;
        }

        .news-item-link:hover {
          color: #ff6600;
          transform: translateX(5px);
        }
      `;
      document.head.appendChild(newsStyles);

      // Function to show article in modal
      function showArticleInModal(article) {
        const modal = document.getElementById('newsArticleModal');
        const title = document.getElementById('newsArticleTitle');
        const date = document.getElementById('newsArticleDate');
        const category = document.getElementById('newsArticleCategory');
        const body = document.getElementById('newsArticleBody');

        // Set content
        title.textContent = article.title;
        date.textContent = article.date;
        category.textContent = article.category;
        body.innerHTML = article.content;

        // Show modal
        modal.style.display = 'block';
      }

      // Function to render news items
      function renderNewsItems(news) {
        robloxNewsFeed.innerHTML = '';

        news.forEach(item => {
          const newsItem = document.createElement('div');
          newsItem.className = 'news-item';

          newsItem.innerHTML = `
            <div class="news-item-img">
              <img src="${item.image}" alt="${item.title}">
            </div>
            <div class="news-item-content">
              <div class="news-item-meta">
                <span class="news-item-date">${item.date}</span>
                <span class="news-item-category">${item.category}</span>
              </div>
              <h3 class="news-item-title">${item.title}</h3>
              <p class="news-item-excerpt">${item.excerpt}</p>
              <button class="news-item-link">Read More ‚Üí</button>
            </div>
          `;

          // Add click handler to show article in modal
          newsItem.addEventListener('click', function() {
            showArticleInModal(item);
          });

          robloxNewsFeed.appendChild(newsItem);
        });

        // Hide fallback content once we have news
        if (fallbackNewsContent) {
          fallbackNewsContent.style.display = 'none';
        }
      }

      // Function to fetch news (simulated)
      function fetchNews() {
        if (loadingIndicator) {
          loadingIndicator.style.display = 'flex';
        }

        // Simulate API delay
        setTimeout(() => {
          // Get one article with each of the three specific images
          const top3Article = robloxNews.find(article => article.title === "Top 3 Avatar Customizers You Need");
          const breakingNewsArticle = robloxNews.find(article => article.title === "Voice Chat Coming to All 13+ Users");
          const fxEffectArticle = robloxNews.find(article => article.title === "Roblox April Update: Particle FX Boost");

          // Create an array with exactly one article for each image
          const selectedArticles = [top3Article, breakingNewsArticle, fxEffectArticle];

          // Render the three articles with different images
          renderNewsItems(selectedArticles);
          if (loadingIndicator) {
            loadingIndicator.style.display = 'none';
          }
        }, 1000);
      }

      // Initial news load
      fetchNews();

      // Refresh button
      refreshButton.addEventListener('click', () => {
        fetchNews();
      });

      // Add click handlers to fallback news items
      if (fallbackNewsContent) {
        const fallbackItems = fallbackNewsContent.querySelectorAll('.news-item');
        fallbackItems.forEach((item, index) => {
          if (index < robloxNews.length) {
            item.addEventListener('click', function() {
              showArticleInModal(robloxNews[index]);
            });
          }
        });
      }
    }

    // Roblox Game Player
    function initRobloxGamePlayer() {
      const signInButton = document.getElementById('signInRoblox');
      const gameSelector = document.getElementById('gameSelector');
      const loadGameButton = document.getElementById('loadGame');
      const playerContainer = document.getElementById('robloxPlayerContainer');

      if (!signInButton || !gameSelector || !loadGameButton || !playerContainer) return;

      // Simulated user state
      let userSignedIn = false;

      // Sign in button click handler
      signInButton.addEventListener('click', () => {
        if (userSignedIn) {
          userSignedIn = false;
          signInButton.innerHTML = '<i class="fas fa-user"></i> Sign In';
          return;
        }

        // Simulate sign in process
        signInButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Signing In...';

        setTimeout(() => {
          userSignedIn = true;
          signInButton.innerHTML = '<i class="fas fa-user-check"></i> Signed In';
        }, 1500);
      });

      // Load game button click handler
      loadGameButton.addEventListener('click', () => {
        const gameId = gameSelector.value;

        if (!gameId) {
          alert('Please select a game first!');
          return;
        }

        if (!userSignedIn) {
          alert('Please sign in to your Roblox account first!');
          return;
        }

        // Create iframe for the Roblox game
        playerContainer.innerHTML = `
          <iframe
            src="https://www.roblox.com/games/${gameId}/--?isFullscreen=true"
            allowfullscreen
            allow="microphone; camera"
            width="100%"
            height="100%"
            frameborder="0"
            scrolling="no"
          ></iframe>
        `;
      });
    }

    // Setup narrator functionality with Web Speech API
    function setupNarrator() {
      // Elements
      const playButton = document.getElementById('playNarration');
      const narratorControls = document.getElementById('narratorControls');
      const closeNarratorControls = document.getElementById('closeNarratorControls');
      const startNarration = document.getElementById('startNarration');
      const stopNarration = document.getElementById('stopNarration');
      const narratorScript = document.getElementById('narratorScript');
      const narrationLines = narratorScript.querySelectorAll('.narration-line');
      const voiceOptions = document.querySelectorAll('.voice-option');
      const languageOptions = document.querySelectorAll('.language-option');

      // Speech synthesis setup
      const synth = window.speechSynthesis;
      let voices = [];
      let currentUtterance = null;
      let currentLineIndex = 0;
      let isNarrating = false;
      let selectedVoiceType = 'male1';
      let selectedLanguage = 'en-US';

      // Store original music volume
      let originalMusicVolume = 1.0;

      // Natural-sounding voice presets
      const naturalVoices = {
        'en-US': {
          male1: { name: 'Google US English Male', fallback: 'en-US-male' },
          male2: { name: 'Microsoft David', fallback: 'en-GB-male' },
          female1: { name: 'Google US English Female', fallback: 'en-US-female' },
          female2: { name: 'Microsoft Zira', fallback: 'en-GB-female' }
        },
        'es-ES': {
          male1: { name: 'Google espa√±ol', fallback: 'es-ES-male' },
          male2: { name: 'Microsoft Pablo', fallback: 'es-MX-male' },
          female1: { name: 'Google espa√±ol Female', fallback: 'es-ES-female' },
          female2: { name: 'Microsoft Sabina', fallback: 'es-MX-female' }
        }
      };

      // Get all available voices
      function getVoices() {
        voices = synth.getVoices();
        console.log('Available voices:', voices.length);
      }

      // Initialize voices
      getVoices();
      if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = getVoices;
      }

      // Find the best natural-sounding voice match
      function findBestNaturalVoice(voiceType, language) {
        if (voices.length === 0) return null;

        // Get the preferred voice names for this language and voice type
        const voicePreset = naturalVoices[language]?.[voiceType] ||
                           naturalVoices['en-US'][voiceType]; // Fallback to English

        // Log available voices for debugging
        console.log('Available voices:', voices.map(v => v.name));

        // Prioritize Microsoft David for male2 voice type
        if (voiceType === 'male2' && language === 'en-US') {
          const davidVoice = voices.find(v => v.name.includes('David'));
          if (davidVoice) {
            console.log('Using Microsoft David voice');
            return davidVoice;
          }
        }

        // Try to find the exact voice by name
        let bestVoice = voices.find(v => v.name.includes(voicePreset.name));

        // If not found, try to find by fallback pattern
        if (!bestVoice) {
          const fallbackPattern = voicePreset.fallback;
          const langCode = fallbackPattern.split('-')[0];
          const gender = fallbackPattern.split('-')[2];

          bestVoice = voices.find(v => {
            return v.lang.toLowerCase().startsWith(langCode.toLowerCase()) &&
                   (v.name.toLowerCase().includes(gender) ||
                   (v.gender && v.gender.toLowerCase() === gender));
          });
        }

        // If still not found, just find any voice in the right language
        if (!bestVoice) {
          const langCode = language.split('-')[0];
          bestVoice = voices.find(v => v.lang.toLowerCase().startsWith(langCode.toLowerCase()));
        }

        // Last resort - just use the first available voice
        return bestVoice || voices[0];
      }

      // Create utterance for a line
      function createUtterance(text) {
        const utterance = new SpeechSynthesisUtterance(text);

        // First try to find Microsoft David specifically
        const davidVoice = voices.find(v => v.name.includes('David'));
        if (davidVoice) {
          console.log('Using Microsoft David voice for narration');
          utterance.voice = davidVoice;
          utterance.lang = davidVoice.lang;
        } else {
          // If David not found, use the regular selection logic
          const bestVoice = findBestNaturalVoice(selectedVoiceType, selectedLanguage);
          if (bestVoice) {
            utterance.voice = bestVoice;
            utterance.lang = bestVoice.lang;
          } else {
            utterance.lang = selectedLanguage;
          }
        }

        // Adjust rate and pitch for more natural sound
        utterance.rate = 0.9; // Slightly slower for better clarity
        utterance.pitch = 1.0;
        utterance.volume = 1.0;

        return utterance;
      }

      // Lower background music during narration
      function lowerBackgroundMusic() {
        const audio = document.getElementById('robloxTheme');
        if (audio && !audio.paused) {
          originalMusicVolume = audio.volume;
          audio.volume = 0.1; // Lower to 10% volume during narration
        }
      }

      // Restore background music after narration
      function restoreBackgroundMusic() {
        const audio = document.getElementById('robloxTheme');
        if (audio && !audio.paused) {
          audio.volume = originalMusicVolume;
        }
      }

      // Speak a line
      function speakLine(index) {
        if (index >= narrationLines.length) {
          isNarrating = false;
          stopNarration.disabled = true;
          startNarration.disabled = false;
          restoreBackgroundMusic();
          return;
        }

        currentLineIndex = index;
        const line = narrationLines[index].textContent;
        currentUtterance = createUtterance(line);

        currentUtterance.onend = () => {
          if (isNarrating) {
            speakLine(index + 1);
          }
        };

        synth.speak(currentUtterance);
      }

      // Voice selection
      voiceOptions.forEach(option => {
        option.addEventListener('click', function() {
          // Remove selected class from all options
          voiceOptions.forEach(opt => opt.classList.remove('selected'));
          // Add selected class to clicked option
          this.classList.add('selected');
          // Update selected voice type
          selectedVoiceType = this.getAttribute('data-voice');
        });
      });

      // Language selection
      languageOptions.forEach(option => {
        option.addEventListener('click', function() {
          // Remove selected class from all options
          languageOptions.forEach(opt => opt.classList.remove('selected'));
          // Add selected class to clicked option
          this.classList.add('selected');
          // Update selected language
          selectedLanguage = this.getAttribute('data-lang');
        });
      });

      // Start narration button
      startNarration.addEventListener('click', () => {
        if (isNarrating) return;

        isNarrating = true;
        startNarration.disabled = true;
        stopNarration.disabled = false;

        // Lower background music volume
        lowerBackgroundMusic();

        speakLine(0);
        narratorControls.style.display = 'none';
      });

      // Stop narration button
      stopNarration.addEventListener('click', () => {
        synth.cancel();
        isNarrating = false;
        stopNarration.disabled = true;
        startNarration.disabled = false;

        // Restore background music volume
        restoreBackgroundMusic();
      });

      // Close narrator controls
      closeNarratorControls.addEventListener('click', () => {
        narratorControls.style.display = 'none';
      });

      // Open narrator controls when play button is clicked
      playButton.addEventListener('click', () => {
        narratorControls.style.display = 'block';
      });

      // Select the first voice option by default
      if (voiceOptions.length > 0) {
        voiceOptions[0].classList.add('selected');
      }
    }

    // Display badges in the UI with async support
    async function displayBadges() {
      const container = document.getElementById("badgeList");
      if (!container) return;

      // Clear existing badges
      container.innerHTML = "";

      // Create a fragment for better performance
      const fragment = document.createDocumentFragment();

      // Check all badges in parallel for better performance
      const badgePromises = badges.map(async (badge) => {
        try {
          const isUnlocked = await badge.check();
          return { badge, isUnlocked };
        } catch (error) {
          console.error(`Error checking badge ${badge.id}:`, error);
          return { badge, isUnlocked: false };
        }
      });

      // Wait for all badge checks to complete
      const badgeResults = await Promise.all(badgePromises);

      // Add each badge to the fragment
      badgeResults.forEach(({ badge, isUnlocked }) => {
        const badgeElement = document.createElement("div");
        badgeElement.className = `badge-item ${isUnlocked ? '' : 'locked'}`;

        badgeElement.innerHTML = `
          <div class="badge-icon">${badge.icon}</div>
          <h3>${badge.title}</h3>
          <p>${badge.desc}</p>
          <div class="badge-status">${isUnlocked ? 'Unlocked!' : 'Locked'}</div>
        `;

        fragment.appendChild(badgeElement);
      });

      // Add all badges to container
      container.appendChild(fragment);

      // Count unlocked badges
      const unlockedCount = badgeResults.filter(result => result.isUnlocked).length;

      // Update progress in console
      console.log(`%cüèÜ Badge Progress: ${unlockedCount}/${badges.length} badges earned`,
        `color: #ff6600; font-weight: bold;`);

      // Return unlocked badges for other functions to use
      return badgeResults.filter(result => result.isUnlocked).map(result => result.badge);
    }

    // Add CSS for error message
    const style = document.createElement('style');
    style.textContent = `
      .news-error {
        padding: 30px;
        background: rgba(0,0,0,0.3);
        border-radius: 15px;
        text-align: center;
        color: #ccc;
      }
      .news-retry-btn {
        margin-top: 15px;
        background: #ff4500;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 10px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
      }
      .news-retry-btn:hover {
        background: #ff6600;
        transform: translateY(-2px);
      }

      /* Badge System Styles */
      .user-badges {
        padding: 60px 0;
        position: relative;
        overflow: hidden;
        background: linear-gradient(45deg, #111 0%, #222 100%);
      }
      .achievements-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("images/community-bg.webp") center/cover no-repeat;
        opacity: 0.1;
        z-index: -1;
        filter: blur(5px);
      }
      .achievements-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        align-items: center;
      }
      .achievements-text {
        background: rgba(0,0,0,0.7);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        border: 2px solid #444;
      }
      .achievements-subtitle {
        font-size: 2.5rem;
        margin-bottom: 20px;
        color: #ff6600;
        text-shadow: 2px 2px 0 #000;
      }
      .achievements-desc {
        margin-bottom: 25px;
        color: #ddd;
        font-size: 1.1rem;
      }
      .badge-info {
        background: rgba(255,100,0,0.1);
        padding: 20px;
        border-radius: 15px;
        border: 1px solid rgba(255,100,0,0.3);
        margin-top: 20px;
      }
      .badge-info h3 {
        color: #ff6600;
        margin-bottom: 15px;
        font-size: 1.3rem;
      }
      .badge-list-info {
        list-style: none;
      }
      .badge-list-info li {
        margin-bottom: 10px;
        color: #ddd;
      }
      .badge-list {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
      }
      .badge-item {
        background: rgba(0,0,0,0.6);
        border: 2px solid #444;
        border-radius: 15px;
        padding: 20px;
        text-align: center;
        transition: 0.3s;
      }
      .badge-item:hover {
        transform: scale(1.05);
        border-color: #ff6600;
        box-shadow: 0 10px 20px rgba(255,100,0,0.3);
      }
      .badge-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 15px;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
      }
      .badge-item.locked .badge-icon {
        filter: grayscale(100%);
        opacity: 0.5;
      }
      .badge-item h3 {
        font-size: 1.2rem;
        margin-bottom: 5px;
        color: #ff6600;
      }
      .badge-item p {
        font-size: 0.9rem;
        color: #ccc;
      }
      .badge-item.locked h3,
      .badge-item.locked p {
        color: #777;
      }
      .badge-status {
        margin-top: 10px;
        font-size: 0.8rem;
        color: #00c8ff;
      }
      .badge-item.locked .badge-status {
        color: #777;
      }

      /* Learning Center Styles */
      .learning-center {
        padding: 60px 0;
        position: relative;
        overflow: hidden;
      }
      .learning-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("images/blog-bg.webp") center/cover no-repeat;
        opacity: 0.1;
        z-index: -1;
      }
      .learning-content {
        background: rgba(0,0,0,0.7);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        border: 2px solid #444;
      }
      .learning-header {
        text-align: center;
        margin-bottom: 30px;
      }
      .learning-header h3 {
        font-size: 2.5rem;
        color: #ff6600;
        text-shadow: 2px 2px 0 #000;
        margin-bottom: 15px;
      }
      .learning-header p {
        color: #ddd;
        font-size: 1.1rem;
        max-width: 800px;
        margin: 0 auto;
      }
      .tutorial-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 30px;
      }
      .tutorial-card {
        background: rgba(20,20,20,0.8);
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        border: 2px solid #444;
        transition: all 0.3s;
      }
      .tutorial-card:hover {
        transform: translateY(-10px);
        border-color: #ff6600;
        box-shadow: 0 20px 40px rgba(255,100,0,0.3);
      }
      .tutorial-img {
        height: 180px;
        overflow: hidden;
        position: relative;
      }
      .tutorial-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .tutorial-content {
        padding: 20px;
      }
      .tutorial-title {
        font-size: 1.3rem;
        margin-bottom: 10px;
        color: #ff6600;
      }
      .tutorial-desc {
        color: #ccc;
        margin-bottom: 15px;
        font-size: 0.9rem;
      }
      .tutorial-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #aaa;
        font-size: 0.8rem;
      }
      .tutorial-level {
        background: #00c8ff;
        color: white;
        padding: 3px 10px;
        border-radius: 10px;
        font-weight: bold;
      }
      .tutorial-link {
        display: inline-block;
        margin-top: 10px;
        color: #00c8ff;
        font-weight: bold;
        transition: all 0.3s;
      }
      .tutorial-link:hover {
        color: #00e6ff;
        transform: translateX(5px);
      }

      /* Video Container Styles */
      .video-container {
        position: relative;
        width: 100%;
        height: 0;
        padding-bottom: 56.25%; /* 16:9 aspect ratio */
        overflow: hidden;
        margin-bottom: 15px;
        background: #000;
        border-radius: 10px 10px 0 0;
        border: 1px solid #333;
      }

      .video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
      }

      /* Video Modal Styles */
      .video-modal {
        display: none;
        position: fixed;
        z-index: 3000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        overflow: auto;
      }

      .video-modal-content {
        position: relative;
        width: 90%;
        max-width: 1000px;
        margin: 5% auto;
        background: transparent;
      }

      .close-video-modal {
        position: absolute;
        top: -40px;
        right: 0;
        color: #fff;
        font-size: 35px;
        font-weight: bold;
        cursor: pointer;
        z-index: 3001;
        transition: all 0.3s;
      }

      .close-video-modal:hover {
        color: #ff6600;
        transform: scale(1.2);
      }

      .modal-video-container {
        position: relative;
        width: 100%;
        height: 0;
        padding-bottom: 56.25%;
        overflow: hidden;
      }

      .modal-video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
        border-radius: 10px;
      }

      .expand-video-btn {
        background: #ff6600;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        font-weight: bold;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        transition: all 0.3s;
        margin-top: 10px;
        width: 100%;
      }

      .expand-video-btn:hover {
        background: #ff8800;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 102, 0, 0.3);
      }

      .expand-video-btn::before {
        content: '\f065'; /* Font Awesome fullscreen icon */
        font-family: 'Font Awesome 6 Free';
        font-weight: 900;
      }

      /* Script Editor Section Styles */
      .script-editor-section {
        padding: 60px 0;
        position: relative;
        overflow: hidden;
        background: linear-gradient(135deg, #111 0%, #222 100%);
      }

      .editor-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("images/blog-bg.webp") center/cover no-repeat;
        opacity: 0.1;
        z-index: -1;
        filter: blur(5px);
      }

      .editor-content {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 30px;
        align-items: start;
      }

      .editor-intro {
        background: rgba(0,0,0,0.7);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        border: 2px solid #444;
      }

      .editor-subtitle {
        font-size: 2rem;
        margin-bottom: 20px;
        color: #ff6600;
        text-shadow: 2px 2px 0 #000;
      }

      .editor-desc {
        margin-bottom: 25px;
        color: #ddd;
        font-size: 1.1rem;
        line-height: 1.6;
      }

      .editor-features {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }

      .editor-feature {
        display: flex;
        align-items: center;
        gap: 10px;
        color: #ccc;
      }

      .editor-feature i {
        color: #ff6600;
        font-size: 1.2rem;
      }

      .editor-workspace {
        background: rgba(20,20,20,0.9);
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        border: 2px solid #444;
      }

      .editor-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #1e1e1e;
        padding: 10px 15px;
        border-bottom: 1px solid #333;
      }

      .editor-tabs {
        display: flex;
        gap: 5px;
      }

      .editor-tab {
        padding: 8px 15px;
        background: #252525;
        color: #ccc;
        border-radius: 5px 5px 0 0;
        font-size: 0.9rem;
        cursor: pointer;
      }

      .editor-tab.active {
        background: #333;
        color: #ff6600;
        border-bottom: 2px solid #ff6600;
      }

      .editor-controls {
        display: flex;
        gap: 10px;
      }

      .editor-btn {
        background: #333;
        color: #ccc;
        border: 1px solid #444;
        padding: 6px 12px;
        border-radius: 5px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .editor-btn:hover {
        background: #444;
        color: #fff;
      }

      .editor-btn.primary {
        background: #ff6600;
        color: #fff;
        border-color: #ff6600;
      }

      .editor-btn.primary:hover {
        background: #ff8800;
        box-shadow: 0 0 10px rgba(255, 102, 0, 0.5);
      }

      .editor-main {
        padding: 0;
        position: relative;
      }

      .lua-editor {
        width: 100%;
        height: 350px;
        background: #1e1e1e;
        color: #d4d4d4;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 14px;
        line-height: 1.5;
        padding: 15px;
        border: none;
        resize: none;
        outline: none;
      }

      .editor-status {
        padding: 10px 15px;
        font-size: 0.9rem;
        color: #00c8ff;
        background: #252525;
        border-top: 1px solid #333;
      }

      /* Donation Section Styles */
      .donation-section {
        padding: 60px 0;
        position: relative;
        overflow: hidden;
        background: linear-gradient(45deg, #111 0%, #222 100%);
      }

      .donation-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("images/community-bg.webp") center/cover no-repeat;
        opacity: 0.1;
        z-index: -1;
        filter: blur(5px);
      }

      .donation-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        align-items: center;
      }

      .donation-text {
        background: rgba(0,0,0,0.7);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        border: 2px solid #444;
      }

      .donation-subtitle {
        font-size: 2rem;
        margin-bottom: 20px;
        color: #ff6600;
        text-shadow: 2px 2px 0 #000;
      }

      .donation-desc {
        margin-bottom: 25px;
        color: #ddd;
        font-size: 1.1rem;
        line-height: 1.6;
      }

      .donation-features {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }

      .donation-feature {
        display: flex;
        align-items: center;
        gap: 10px;
        color: #ccc;
      }

      .donation-feature i {
        color: #ff6600;
        font-size: 1.2rem;
      }

      .donation-box {
        background: rgba(0,0,0,0.7);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        border: 2px solid #444;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
      }

      .gift-box {
        position: relative;
        width: 150px;
        height: 150px;
        margin: 0 auto;
        perspective: 1000px;
        transform-style: preserve-3d;
        animation: float 3s ease-in-out infinite;
      }

      @keyframes float {
        0% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-10px) rotate(5deg); }
        100% { transform: translateY(0px) rotate(0deg); }
      }

      .gift-box-lid {
        position: absolute;
        width: 100%;
        height: 30px;
        top: -30px;
        transform-origin: bottom;
        transform-style: preserve-3d;
        animation: lid-open 10s ease-in-out infinite;
      }

      @keyframes lid-open {
        0%, 10% { transform: rotateX(0deg); }
        20%, 80% { transform: rotateX(-110deg); }
        90%, 100% { transform: rotateX(0deg); }
      }

      .gift-lid-top {
        position: absolute;
        width: 100%;
        height: 100%;
        background: #ff6600;
        top: 0;
        transform: rotateX(90deg) translateZ(15px);
      }

      .gift-lid-side {
        position: absolute;
        width: 100%;
        height: 30px;
        background: #ff8800;
        transform: rotateX(-90deg) translateZ(15px);
      }

      .gift-box-base {
        position: absolute;
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
      }

      .gift-box-front, .gift-box-back, .gift-box-left, .gift-box-right, .gift-box-bottom, .gift-box-inside {
        position: absolute;
        background: #ff4500;
      }

      .gift-box-front, .gift-box-back {
        width: 100%;
        height: 100%;
      }

      .gift-box-left, .gift-box-right {
        width: 30px;
        height: 100%;
        top: 0;
      }

      .gift-box-bottom {
        width: 100%;
        height: 30px;
        bottom: 0;
        transform: rotateX(90deg) translateZ(15px);
      }

      .gift-box-front {
        transform: translateZ(75px);
      }

      .gift-box-back {
        transform: rotateY(180deg) translateZ(75px);
      }

      .gift-box-left {
        left: -15px;
        transform: rotateY(-90deg) translateZ(75px);
      }

      .gift-box-right {
        right: -15px;
        transform: rotateY(90deg) translateZ(75px);
      }

      .gift-box-inside {
        width: 100%;
        height: 100%;
        background: #222;
        transform: translateZ(74px);
        animation: glow 3s ease-in-out infinite;
      }

      @keyframes glow {
        0%, 100% { box-shadow: 0 0 10px rgba(255, 102, 0, 0.5); }
        50% { box-shadow: 0 0 30px rgba(255, 102, 0, 0.8); }
      }

      .gift-ribbon-v, .gift-ribbon-h {
        position: absolute;
        background: #00c8ff;
        z-index: 1;
      }

      .gift-ribbon-v {
        width: 20px;
        height: 150px;
        left: 50%;
        margin-left: -10px;
        top: -30px;
      }

      .gift-ribbon-h {
        width: 150px;
        height: 20px;
        top: 50%;
        margin-top: -10px;
        left: 0;
      }

      .donation-info {
        text-align: center;
      }

      .donation-info h4 {
        font-size: 1.5rem;
        margin-bottom: 10px;
        color: #ff6600;
      }

      .donation-info p {
        color: #ccc;
        margin-bottom: 20px;
      }

      .donation-btn {
        display: inline-block;
        background: linear-gradient(45deg, #ff6600, #ff9500);
        color: white;
        padding: 12px 25px;
        border-radius: 30px;
        font-weight: bold;
        text-transform: uppercase;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 1rem;
        border: 2px solid #fff;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      }

      .donation-btn:hover {
        background: linear-gradient(45deg, #ff9500, #ff6600);
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 10px 20px rgba(0,0,0,0.4);
      }

      @media (max-width: 768px) {
        .achievements-content,
        .badge-list {
          grid-template-columns: 1fr;
        }
        .tutorial-grid {
          grid-template-columns: 1fr;
        }
        .video-modal-content {
          width: 95%;
          margin: 10% auto;
        }
        .editor-content,
        .donation-content {
          grid-template-columns: 1fr;
        }
        .editor-controls {
          flex-wrap: wrap;
        }
        .editor-tabs {
          max-width: 50%;
          overflow: hidden;
        }
        .gift-box {
          transform: scale(0.8);
        }
      }
    `;
    document.head.appendChild(style);

    // Setup signup modal functionality
    function setupSignupModal() {
      const modal = document.getElementById('signupModal');
      const joinBtn = document.getElementById('joinButton');
      const closeBtn = document.querySelector('.close-modal');
      const signupForm = document.getElementById('signupForm');
      const usernameInput = document.getElementById('signupUsername');

      // Show modal when join button is clicked
      joinBtn.addEventListener('click', function() {
        modal.style.display = 'block';

        // Pre-fill username if available
        if (localStorage.getItem('username')) {
          usernameInput.value = localStorage.getItem('username');
        }
      });

      // Close modal when X is clicked
      closeBtn.addEventListener('click', function() {
        modal.style.display = 'none';
      });

      // Close modal when clicking outside of it
      window.addEventListener('click', function(event) {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });

      // Handle form submission
      signupForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const username = document.getElementById('signupUsername').value.trim();
        const email = document.getElementById('signupEmail').value.trim();

        if (!username || !email) return;

        // Save user data to localStorage
        localStorage.setItem('username', username);
        localStorage.setItem('userEmail', email);
        localStorage.setItem('userJoined', 'true');

        // Send data to admin via EmailJS
        sendUserDataToEmail(username, email);

        // Update UI
        updateUserHeader();

        // Close modal
        modal.style.display = 'none';
      });

      // Check if user is already signed up - do this on page load
      if (localStorage.getItem('userJoined') === 'true' && localStorage.getItem('username')) {
        joinBtn.style.display = 'none';
        document.getElementById('userInfo').style.display = 'flex';
        document.getElementById('userDisplayName').textContent = localStorage.getItem('username');
      }
    }

    // Send user data to admin via EmailJS (async support)
    async function sendUserDataToEmail(username, email) {
      try {
        // Check all badges in parallel
        const badgePromises = badges.map(async (badge) => {
          try {
            const isUnlocked = await badge.check();
            return isUnlocked ? badge.id : null;
          } catch (error) {
            console.error(`Error checking badge ${badge.id}:`, error);
            return null;
          }
        });

        // Wait for all badge checks to complete
        const badgeResults = await Promise.all(badgePromises);
        const userBadges = badgeResults.filter(id => id !== null);

        // Get visit count and messages sent
        const visitCount = await getVisitCount();
        const messagesSent = await getMessagesSent();

        // Prepare template parameters
        const templateParams = {
          username: username,
          email: email,
          badges: userBadges.join(', '),
          visit_count: visitCount,
          messages_sent: messagesSent
        };

        // Send email using EmailJS
        emailjs.send('default_service', 'template_signup', templateParams)
          .then(function(response) {
            console.log('Email sent!', response.status, response.text);
          }, function(error) {
            console.error('Email failed to send...', error);
          });
      } catch (error) {
        console.error('Error preparing email data:', error);
      }
    }

    // Update user header with username and badges (async support)
    async function updateUserHeader() {
      const userInfo = document.getElementById('userInfo');
      const joinButton = document.getElementById('joinButton');
      const userDisplayName = document.getElementById('userDisplayName');
      const userHeaderBadges = document.getElementById('userHeaderBadges');

      if (!userInfo || !joinButton || !userDisplayName || !userHeaderBadges) return;

      // Check if user is signed up - always check on page load
      if (localStorage.getItem('userJoined') === 'true' && localStorage.getItem('username')) {
        // Hide join button and show user info
        joinButton.style.display = 'none';
        userInfo.style.display = 'flex';

        // Set username
        const username = localStorage.getItem('username');
        userDisplayName.textContent = username;

        // Clear existing badges
        userHeaderBadges.innerHTML = '';

        // Check all badges in parallel for better performance
        const badgePromises = badges.map(async (badge) => {
          try {
            const isUnlocked = await badge.check();
            return isUnlocked ? badge : null;
          } catch (error) {
            console.error(`Error checking badge ${badge.id}:`, error);
            return null;
          }
        });

        // Wait for all badge checks to complete
        const badgeResults = await Promise.all(badgePromises);

        // Filter out unlocked badges and limit to 3
        const unlockedBadges = badgeResults.filter(badge => badge !== null);
        const badgesToShow = unlockedBadges.slice(0, 3); // Show max 3 badges

        // Add badges to header
        badgesToShow.forEach(badge => {
          const badgeElement = document.createElement('div');
          badgeElement.className = 'header-badge';
          badgeElement.textContent = badge.icon;
          badgeElement.title = badge.title;

          // Add shimmer effect to newly earned badges
          if (badge.id === 'newcomer' && !localStorage.getItem('newcomerShown')) {
            badgeElement.classList.add('shimmer');
            localStorage.setItem('newcomerShown', 'true');

            // Remove shimmer after animation completes
            setTimeout(() => {
              badgeElement.classList.remove('shimmer');
            }, 2000);
          }

          userHeaderBadges.appendChild(badgeElement);
        });
      } else {
        // If not signed up or missing username, show join button
        joinButton.style.display = 'block';
        userInfo.style.display = 'none';
      }
    }

    // Initialize video modal functionality
    function initVideoModal() {
      const videoModal = document.getElementById('videoModal');
      const modalVideoFrame = document.getElementById('modalVideoFrame');
      const closeVideoModal = document.querySelector('.close-video-modal');
      const expandButtons = document.querySelectorAll('.expand-video-btn');

      if (!videoModal || !modalVideoFrame || !closeVideoModal) return;

      // Add click event to all expand buttons
      expandButtons.forEach(button => {
        button.addEventListener('click', function() {
          const videoId = this.getAttribute('data-video-id');
          if (videoId) {
            // Set the iframe src with autoplay parameter
            modalVideoFrame.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
            videoModal.style.display = 'block';

            // Add this to ensure videos are visible and properly sized
            modalVideoFrame.style.display = 'block';

            // Lower background music volume if playing
            const audio = document.getElementById('robloxTheme');
            if (audio && !audio.paused) {
              audio.volume = 0.2; // Lower volume during video playback
            }
          }
        });
      });

      // Close modal when X is clicked
      closeVideoModal.addEventListener('click', function() {
        videoModal.style.display = 'none';
        // Stop video playback by clearing the src
        modalVideoFrame.src = '';

        // Restore background music volume
        const audio = document.getElementById('robloxTheme');
        if (audio && !audio.paused) {
          audio.volume = 1.0; // Restore full volume
        }
      });

      // Close modal when clicking outside of it
      window.addEventListener('click', function(event) {
        if (event.target === videoModal) {
          videoModal.style.display = 'none';
          // Stop video playback by clearing the src
          modalVideoFrame.src = '';

          // Restore background music volume
          const audio = document.getElementById('robloxTheme');
          if (audio && !audio.paused) {
            audio.volume = 1.0; // Restore full volume
          }
        }
      });
    }

    // Update message display to show badges next to usernames (async support)
    function updateMessageBadges() {
      // Store user badge data in localStorage for all users
      const userBadgeCache = {};

      // Function to get badges for a username
      async function getBadgesForUsername(username) {
        // If it's the current user, use the badge system
        if (username === localStorage.getItem('username')) {
          // Check all badges in parallel
          const badgePromises = badges.map(async (badge) => {
            try {
              const isUnlocked = await badge.check();
              return isUnlocked ? badge : null;
            } catch (error) {
              console.error(`Error checking badge ${badge.id}:`, error);
              return null;
            }
          });

          // Wait for all badge checks to complete
          const badgeResults = await Promise.all(badgePromises);
          const userBadges = badgeResults.filter(badge => badge !== null);

          // Cache the result
          if (userBadges.length > 0) {
            userBadgeCache[username] = userBadges[0];
            // Store in localStorage for persistence
            try {
              const cachedBadges = JSON.parse(localStorage.getItem('userBadgeCache') || '{}');
              cachedBadges[username] = {
                icon: userBadges[0].icon,
                title: userBadges[0].title,
                id: userBadges[0].id
              };
              localStorage.setItem('userBadgeCache', JSON.stringify(cachedBadges));
            } catch (e) {
              console.error('Error caching badges:', e);
            }
          }

          return userBadges.length > 0 ? userBadges[0] : null;
        } else {
          // For other users, check the cache first
          if (userBadgeCache[username]) {
            return userBadgeCache[username];
          }

          // Check localStorage cache
          try {
            const cachedBadges = JSON.parse(localStorage.getItem('userBadgeCache') || '{}');
            if (cachedBadges[username]) {
              userBadgeCache[username] = cachedBadges[username];
              return cachedBadges[username];
            }
          } catch (e) {
            console.error('Error reading badge cache:', e);
          }

          // If no badge found, assign a default badge based on message count
          // This simulates other users having badges too
          const randomBadgeIndex = Math.floor(Math.abs(username.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % badges.length);
          const defaultBadge = badges[randomBadgeIndex];

          // Cache this assignment
          userBadgeCache[username] = defaultBadge;
          try {
            const cachedBadges = JSON.parse(localStorage.getItem('userBadgeCache') || '{}');
            cachedBadges[username] = {
              icon: defaultBadge.icon,
              title: defaultBadge.title,
              id: defaultBadge.id
            };
            localStorage.setItem('userBadgeCache', JSON.stringify(cachedBadges));
          } catch (e) {
            console.error('Error caching badges:', e);
          }

          return defaultBadge;
        }
      }

      // Override the addMessageToUI function to include badges
      const originalAddMessageToUI = addMessageToUI;

      window.addMessageToUI = function(data, key) {
        // Call the original function first
        originalAddMessageToUI(data, key);

        // Then add badges to messages
        setTimeout(async () => {
          const messages = document.querySelectorAll('.message');
          for (const message of messages) {
            const username = message.querySelector('.user-name')?.textContent;
            if (username) {
              // Check if badges are already added
              if (!message.querySelector('.message-user-badge')) {
                // Get badge for this username
                const badge = await getBadgesForUsername(username);

                if (badge) {
                  const userElement = message.querySelector('.message-user');
                  const badgeElement = document.createElement('div');
                  badgeElement.className = 'message-user-badge';
                  badgeElement.textContent = badge.icon;
                  badgeElement.title = badge.title;
                  userElement.appendChild(badgeElement);
                }
              }
            }
          }
        }, 100);
      };
    }
  </script>
  <!-- Signup Modal -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h2>Join Leo's Insight</h2>
      <p>Sign up to track your achievements and join our community!</p>
      <form id="signupForm">
        <div class="form-group">
          <label for="signupUsername">Username</label>
          <input type="text" id="signupUsername" required placeholder="Enter your username">
        </div>
        <div class="form-group">
          <label for="signupEmail">Email</label>
          <input type="email" id="signupEmail" required placeholder="Enter your email">
        </div>
        <button type="submit" class="signup-btn">JOIN NOW</button>
      </form>
    </div>
  </div>

  <style>
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      overflow: auto;
    }
    .modal-content {
      background: linear-gradient(135deg, #222 0%, #333 100%);
      margin: 10% auto;
      padding: 30px;
      border: 2px solid #ff6600;
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
      position: relative;
      color: #fff;
    }
    .close-modal {
      position: absolute;
      top: 15px;
      right: 20px;
      color: #aaa;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    .close-modal:hover {
      color: #ff6600;
      transform: scale(1.2);
    }
    .modal h2 {
      font-size: 2rem;
      margin-bottom: 15px;
      color: #ff6600;
      text-align: center;
    }
    .modal p {
      margin-bottom: 20px;
      text-align: center;
      color: #ccc;
    }
    .modal .form-group {
      margin-bottom: 20px;
    }
    .modal label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #ddd;
    }
    .modal input {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 2px solid #444;
      background: rgba(0, 0, 0, 0.3);
      color: #fff;
      font-size: 1rem;
      transition: all 0.3s;
    }
    .modal input:focus {
      border-color: #ff6600;
      outline: none;
      box-shadow: 0 0 10px rgba(255, 102, 0, 0.3);
    }
    .signup-btn {
      width: 100%;
      padding: 12px;
      background: linear-gradient(45deg, #ff6600, #ff9500);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: bold;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 10px;
    }
    .signup-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(255, 102, 0, 0.3);
    }
    /* Badge in message styles */
    .message-user-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(255, 102, 0, 0.2);
      margin-left: 5px;
      font-size: 0.7rem;
      border: 1px solid rgba(255, 102, 0, 0.5);
      box-shadow: 0 0 5px rgba(255, 102, 0, 0.3);
      transition: all 0.3s ease;
    }

    .message-user-badge:hover {
      transform: scale(1.2);
      box-shadow: 0 0 10px rgba(255, 102, 0, 0.5);
    }

    /* Message attachment styles */
    .message-attachment {
      margin-top: 10px;
      border-radius: 8px;
      overflow: hidden;
      max-width: 100%;
      background: rgba(0, 0, 0, 0.2);
      padding: 5px;
    }

    .message-image {
      max-width: 100%;
      max-height: 300px;
      border-radius: 6px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .message-image:hover {
      transform: scale(0.98);
    }

    .message-video {
      max-width: 100%;
      max-height: 300px;
      border-radius: 6px;
    }

    .file-download-link {
      display: inline-block;
      padding: 8px 12px;
      background: rgba(255, 102, 0, 0.2);
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
      transition: background 0.2s ease;
    }

    .file-download-link:hover {
      background: rgba(255, 102, 0, 0.4);
    }

    /* Fullsize image overlay */
    .fullsize-image-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .fullsize-image-container {
      position: relative;
      max-width: 90vw;
      max-height: 90vh;
    }

    .fullsize-image-container img {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
    }

    .close-fullsize {
      position: absolute;
      top: -40px;
      right: -40px;
      background: none;
      border: none;
      color: white;
      font-size: 30px;
      cursor: pointer;
      padding: 10px;
    }
  </style>
</body>
</html>
